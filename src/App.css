/* fix: IDå¤šã™ãã‚‹ã®ã§æ”¹å–„ã—ã¦ã„ã“ã† */
/* todo: rootæ•´ç†ã€ä¸€éƒ¨gridãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å¤‰æ›´ã™ã‚‹ã€å‹‰å¼·ã—ã¦æ›¸ãæ–¹ã‚’å¤‰ãˆã¦ã¿ã‚‹ */

:root {
  /* =========================================
     ğŸ¨ 1. Base Colors & Typography
     ========================================= */

  /* --- Basic Palette --- */
  --color-white: #fff;
  --color-milkywhite: #efefef;
  --color-black: #000;
  --color-offwhite: #ddd;
  --color-gray: #555;
  --color-darkgray: #333;
  --color-darkblue: #546e7a;
  --color-oceanblue: #3d5ef4;
  --color-aquablue: #aeffff;
  --color-lightblue: #00ffff;
  --color-green: #4aff50;
  --color-lightyellow: #fff9c4;
  --color-yellow: yellow;

  /* --- Accent Colors --- */
  --color-redpink: #ff5a78;
  --color-red: red;
  --color-lightorange: #ffe3a3;
  --color-creamorange: #ffd399;
  --color-orange: #ffa74f;
  --color-darkorange: #cb7c0c;
  --color-gold: #ffd700;
  --color-pink: pink;
  --color-hotpink: rgb(255, 121, 143);
  --color-purple: #bcacc8;
  --color-lightpurple: #f8d1ff;

  /* --- Fonts --- */
  --font-main: "M PLUS Rounded 1c", sans-serif;
  --font-pop: "Mochiy Pop P One", sans-serif;
  --font-pop-fredoka: "Fredoka One", cursive, sans-serif;

  /* --- Backgrounds --- */
  --body-bg: #222;
  --pop-bg: #cfd8dc;
  --game-word-bg: #0f26d4;
  --config-bg: rgba(20, 10, 40, 0.75);

  /* =========================================
     ğŸ“ 2. Layout & Layers
     ========================================= */

  /* --- Scale Standard --- */
  --scale-standard-width: 1200px;
  --scale-standard-height: 780px;
  --ui-tilt: perspective(500px) rotateX(15deg);

  /* --- Z-Index Map --- */
  --z-key-cat: 1;
  --z-canvas: 50;
  --z-diff-header: 10;
  --z-title: 100;
  --z-modal: 200;
  --z-loading: 10000;
  --z-game-hud: 20;
  --z-game-score: 100;
  --z-game-render: 999;
  --z-game-finish: 1000;
  --z-fade-overlay: 1500;
  --z-config: 9999;

  /* =========================================
     ğŸ’ 3. Materials (Glass, Shine, Shadow)
     ========================================= */

  /* --- Glass Backgrounds --- */
  --glass-bg-light: rgba(255, 255, 255, 0.15);
  --glass-bg-dark: rgba(0, 0, 0, 0.5);

  /* --- Shadows (General) --- */
  --color-shadow-pink: #efa4b8;
  --color-shadow-dark: rgba(0, 0, 0, 0.2);
  --color-shadow-dark-deep: rgba(0, 0, 0, 0.15); /* ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã®è–„ãåºƒã„å½± */
  --color-shadow-hotred: #c41e3a;
  --color-text-shadow: rgba(0, 0, 0, 0.3);

  /* --- Shine Presets (å…‰æ²¢ãƒ—ãƒªã‚»ãƒƒãƒˆ) --- */

  /* 1. å¤§ããªãƒ‘ãƒãƒ«ç”¨ï¼ˆã‚·ãƒ£ãƒ¼ãƒ—ãªç·šï¼‰ */
  --shine-panel-base:
    inset 0.8px 1px 0px rgba(255, 255, 255, 0.8),
    inset -0.2px -0.8px 0px rgba(255, 255, 255, 0.6),
    0 20px 50px rgba(0, 0, 0, 0.2);

  /* 2. ç‹å† ã‚¢ã‚¤ã‚³ãƒ³ç”¨ï¼ˆä¸­ãã‚‰ã„ã®æŸ”ã‚‰ã‹ã•ï¼‰ */
  --shine-icon-base:
    inset 1.7px 1.3px 2px rgba(255, 255, 255, 1),
    inset -1.1px -1.5px 1px rgba(255, 255, 255, 0.5),
    0 4px 10px rgba(0, 0, 0, 0.2);
  --shine-icon-hover:
    inset 2px 2px 5px rgba(255, 255, 255, 0.9),
    inset -1px -1px 3px rgba(255, 255, 255, 0.5), 0 8px 15px rgba(0, 0, 0, 0.3);
  --shine-icon-active:
    inset 1px 1px 2px rgba(255, 255, 255, 0.6),
    inset -1px -1px 2px rgba(255, 255, 255, 0.2), 0 2px 5px rgba(0, 0, 0, 0.2);

  /* 3. è©³ç´°ãƒœã‚¿ãƒ³ç”¨ï¼ˆå°ã•ãªå®çŸ³é¢¨ï¼‰ */
  --shine-detail-base:
    inset 0.8px 0.6px 4px rgba(255, 255, 255, 0.8),
    inset -0.2px 0.1px 0.5px rgba(255, 255, 255, 0.3),
    0 2px 5px rgba(0, 0, 0, 0.2);
  --shine-detail-hover:
    inset 2px 2px 6px rgba(255, 255, 255, 1),
    inset -1px -1px 4px rgba(255, 255, 255, 0.5),
    0 0 10px rgba(255, 255, 255, 0.6);
  --shine-detail-active:
    inset 2px 2px 6px rgba(255, 255, 255, 0.8), 0 0 5px rgba(255, 255, 255, 0.8);

  /* 4. scroll-bar */
  --sb-width: 10px; /* å¹… */
  --sb-track-color: rgba(0, 0, 0, 0.15); /* ãƒ¬ãƒ¼ãƒ«ã®è‰² */

  /* ã‚´ãƒ¼ãƒ«ãƒ‰ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
  --sb-gold-start: #ffd700;
  --sb-gold-end: #ffaa00;
  --sb-gold-hover-start: #fff700;
  --sb-gold-hover-end: #ffcc00;

  /* 5. ãƒã‚¤ã‚¹ã‚³ã‚¢æ ç”¨ï¼ˆãƒ€ãƒ¼ã‚¯æ ï¼‰ */
  --shine-darkbox-base:
    inset 1.5px 1.2px 0px rgba(255, 255, 255, 0.9),
    inset -1px -1px 0px rgba(255, 255, 255, 0.6), 0 4px 10px rgba(0, 0, 0, 0.3);

  /* =========================================
     ğŸˆ 4. Component: Loading & Cat Character
     ========================================= */

  /* --- Cat Colors --- */
  --color-ear-normal: #ffe3e8; /* é€šå¸¸ã®è€³ */
  --color-ear-landing: #efa4b8; /* ç€åœ°æ™‚ã®è€³ï¼ˆæ¿ƒã„ï¼‰ */
  --color-body-start: #ffe3e8;
  --color-body-end: #ffbed2;

  /* --- Cat Patterns (Gradients) --- */

  /* â‘  é€šå¸¸ã®é¡”ï¼ˆè€³ãŒé«˜ã„ -15pxï¼‰ */
  --loading-key-grad:
    linear-gradient(135deg, transparent 50%, var(--color-ear-normal) 50%)
      no-repeat -10px -15px / 40px 40px,
    /* å·¦è€³ */
    linear-gradient(225deg, transparent 50%, var(--color-ear-normal) 50%)
      no-repeat 30px -15px / 40px 40px,
    /* å³è€³ */
    linear-gradient(
        135deg,
        var(--color-body-start) 0%,
        var(--color-body-end) 100%
      ); /* æœ¬ä½“ */

  /* â‘¡ ç€åœ°æ™‚ã®é¡”ï¼ˆè€³ãŒä½ã„ -5px / è‰²ãŒæ¿ƒã„ï¼‰ */
  --loading-key-grad-landing:
    linear-gradient(135deg, transparent 50%, var(--color-ear-landing) 50%)
      no-repeat -10px -5px / 40px 40px,
    linear-gradient(225deg, transparent 50%, var(--color-ear-landing) 50%)
      no-repeat 30px -5px / 40px 40px,
    linear-gradient(
      135deg,
      var(--color-body-start) 0%,
      var(--color-body-end) 100%
    );

  /* å…‰æ²¢ç”¨ */
  --loading-key-grad-shiny: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.8),
    rgba(255, 255, 255, 0.1)
  );

  /* --- Loading Screen Styles --- */
  --loading-shadow: rgba(255, 255, 255, 0.5);
  --loading-box-shadow:
    0 8px 0 var(--color-shadow-pink), 0 15px 20px var(--color-shadow-dark);
  --loading-grad: linear-gradient(
    to bottom,
    #4b256f 0%,
    #924c78 40%,
    #de7c6b 70%,
    #fabe7c 100%
  );

  /* --- Loading Animations --- */
  --loading-animation-key: 1.2s;
  --loading-animation-paw: 2s;
  --loading-transition: 1.5s;

  /* =========================================
     ğŸ® 5. Component: Title & UI
     ========================================= */

  /* --- Title Styles --- */
  --title-shadow:
    0 0 10px rgba(255, 255, 255, 0.8), 2px 2px 0px rgba(100, 100, 255, 0.8),
    0 5px 15px rgba(0, 0, 0, 0.7);

  --title-menu-grad: linear-gradient(
    135deg,
    hsl(42, 100%, 65%) 0%,
    #ffa442 40%,
    #c77dff 100%
  );

  /* --- Title Animations --- */
  --title-animation-bouncing: 2.5s;
}

/* åŸºæœ¬è¨­å®š (Base) */
body {
  margin: 0;
  width: 100%;
  height: 100dvh;
  background: var(--body-bg);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  font-family: var(--font-main);
  color: var(--color-white);
}

#scaler {
  position: absolute;
  transform: translate(-50%, -50%);
  width: var(--scale-standard-width);
  height: var(--scale-standard-height);
  transform-origin: center center;
  overflow: hidden;
  border-radius: 20px;
}

#game-wrapper {
  width: var(--scale-standard-width);
  height: var(--scale-standard-height);
  position: relative;
  background-color: var(--color-white);
}

.bg-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  transition: opacity 0.5s ease-in-out;
  opacity: 0;
}

#myCanvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-canvas);
  pointer-events: none;
}

/* --- ã‚¯ãƒªãƒƒã‚¯/æ“ä½œç¦æ­¢ç”¨ --- */
.no-click {
  pointer-events: none !important;
  cursor: default !important;
}

/* æ—¥æœ¬èªã®æ—¢å­˜è¨­å®š */
.has-punctuation {
  text-indent: 0.5em;
}

/* ãƒ­ãƒ¼ãƒå­—è¡Œã‚‚åŒã˜ã ã‘ãšã‚‰ã™ */
#full-roma.has-punctuation {
  text-indent: 0.5em;
}

/* =========================================
   â˜…ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ï¼ˆãƒã‚³ãƒŸãƒŸã·ã‚‹ã·ã‚‹Verï¼‰
   ========================================= */
#loading-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* ãƒˆãƒ¯ã‚¤ãƒ©ã‚¤ãƒˆèƒŒæ™¯ */
  background: var(--loading-grad);
  z-index: var(--z-loading);

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  /* é€æ˜åº¦ã ã‘å¤‰åŒ–ã•ã›ã‚‹ */
  transition:
    opacity var(--loading-transition) ease,
    visibility var(--loading-transition) ease;
  opacity: 1;
}

/* --- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¨ä½“ã®ç®± --- */
.keyboard-loader {
  display: flex;
  gap: 14px;
  padding-top: 25px;
  /* å°‘ã—æ–œã‚ã‹ã‚‰è¦‹ãŸã‚ˆã†ãªãƒ‘ãƒ¼ã‚¹ã‚’ã¤ã‘ã‚‹ */
  transform: var(--ui-tilt);
}

/* --- â˜…æ¿€ã‹ã‚ï¼šã·ã‚‹ã·ã‚‹ãƒã‚³ãƒŸãƒŸã‚­ãƒ¼ã‚­ãƒ£ãƒƒãƒ— --- */
.key.cat {
  position: relative;
  width: 60px;
  height: 60px;
  background: var(--loading-key-grad);
  border-radius: 16px;
  font-family: var(--font-pop-fredoka);
  font-size: 30px;
  color: var(--color-redpink);
  text-shadow: 1px 1px 0 var(--loading-shadow);
  display: flex;
  justify-content: center;
  align-items: center;
  will-change: transform;
  box-shadow: var(--loading-box-shadow);
  animation: catBounce var(--loading-animation-key) infinite ease-in-out;
  animation-delay: calc(var(--i) * 0.1s);
  overflow: hidden;
}

/* ã‚­ãƒ¼ã®è¡¨é¢ã®ãƒ„ãƒ¤ãƒ„ãƒ¤å…‰æ²¢ */
.key.cat::before {
  content: "";
  position: absolute;
  top: 5px;
  left: 5px;
  width: 85%;
  height: 40%;
  /* åŠé€æ˜ã®ç™½ã„æ¥•å††ã§å…‰æ²¢ã‚’è¡¨ç¾ */
  background: var(--loading-key-grad-shiny);
  border-radius: 12px 12px 20px 20px;
  z-index: var(--z-key-cat); /* æ–‡å­—ã‚ˆã‚Šæ‰‹å‰ */
  pointer-events: none;
}

/* --- â˜…æ–°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šå¤‰æ•°ã‚’æ´»ç”¨ã—ã¦ã‚¹ãƒƒã‚­ãƒªåŒ– --- */
@keyframes catBounce {
  0%,
  100% {
    transform: translateY(0) scale(1, 1);
    /* å¤‰æ•°ãƒãƒ³ç½®ã */
    background: var(--loading-key-grad);
    box-shadow:
      0 8px 0 var(--color-shadow-pink),
      0 15px 20px var(--color-shadow-dark);
  }
  30% {
    /* ã‚¸ãƒ£ãƒ³ãƒ—ï¼ */
    transform: translateY(-25px) scale(1.1, 0.9) rotateX(-10deg);
    box-shadow:
      0 30px 0 var(--color-shadow-pink),
      0 40px 25px var(--color-shadow-dark-deep);
  }
  50% {
    /* ç€åœ°ï¼ */
    transform: translateY(8px) scale(0.85, 1.15);
    /* â˜…ã“ã“ã§ç€åœ°ç”¨ã®é¡”å¤‰æ•°ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ï¼ */
    background: var(--loading-key-grad-landing);
    box-shadow:
      0 0 0 var(--color-shadow-pink),
      0 0 0 transparent;
  }
  70% {
    /* åå‹• */
    transform: translateY(-5px) scale(1.05, 0.95);
    /* é€šå¸¸ã®é¡”ã«æˆ»ã™ */
    background: var(--loading-key-grad);
    box-shadow:
      0 10px 0 var(--color-shadow-pink),
      0 15px 15px var(--color-shadow-dark);
  }
}

/* ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
.loading-text {
  margin-top: 60px;
  font-family: var(--font-pop-fredoka);
  color: var(--color-white);
  font-size: 32px;
  letter-spacing: 0.1em;
  text-shadow: 0 4px 5px var(--color-text-shadow);
  transform: var(--ui-tilt);
}

.paw {
  display: inline-block;
  font-size: 1.2em;
  will-change: transform;
  animation: pawFloatBig var(--loading-animation-paw) infinite ease-in-out;
}

@keyframes pawFloatBig {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: rotate(20deg) translateY(-15px) scale(1.1);
  }
}

/* ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ UI */
.title-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: var(--z-title);
}

.title-content-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 60px;
}

.title-anim-wrapper {
  opacity: 0;
  transform: translateY(30px);
  transition:
    opacity 1s ease-out,
    transform 1s ease-out;
}

.title-anim-wrapper.visible {
  opacity: 1;
  transform: translateY(0);
}

.title-anim-wrapper.exit-up {
  transform: translateY(-80px);
  opacity: 0;
  transition:
    transform 0.6s ease-in,
    opacity 0.6s ease-in;
}

.game-title {
  font-size: 115px;
  color: var(--color-lightorange);
  font-weight: 600;
  text-shadow: var(--title-shadow);
}

.game-title.bouncing {
  animation: titleBounce var(--title-animation-bouncing) infinite ease-in-out;
}

@keyframes titleBounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-15px);
  }
}

.main-menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 45px;
  opacity: 0;
  transform: translateY(20px);
  transition:
    opacity 0.8s ease-out,
    transform 0.8s ease-out;

  transition-delay: 0.5s;
}

.main-menu-buttons.visible {
  opacity: 1;
  transform: translateY(0);
}

.main-menu-buttons.exit-down {
  transform: translateY(80px);
  opacity: 0;
  transition:
    transform 0.6s ease-in,
    opacity 0.6s ease-in;
}

/* --- å…±é€šã®ç«‹ä½“æ„Ÿå®šç¾©ï¼ˆã“ã‚Œã‚’å¤‰æ•°ã«å…¥ã‚Œã¦ä½¿ã„å›ã™ï¼ï¼‰ --- */
.menu-btn {
  /* å¤‰æ•°å®šç¾©ï¼šå†…å´ã®ãƒ„ãƒ¤ã¨å½±ã®ã‚»ãƒƒãƒˆ */
  --btn-inner-shine:
    inset 0 2px 4px rgba(255, 255, 255, 0.9),
    /* ãƒ•ãƒã®å…‰ */ inset 0 10px 15px rgba(255, 255, 255, 0.4),
    /* å…¨ä½“ã®ä¸¸ã¿ */ inset 0 -3px 8px rgba(0, 0, 0, 0.15); /* ä¸‹ã®å½± */

  position: relative;
  overflow: hidden;
  width: 260px;
  padding: 10px 0;

  font-weight: bold;
  font-size: 1.4rem;
  color: var(--color-white);
  cursor: pointer;
  border-radius: 100px;

  background: var(--title-menu-grad);
  border: 4px solid var(--color-white);

  /* â˜…å¤‰æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã€å¤–å´ã®å½±ã ã‘ã‚’ã“ã“ã§æŒ‡å®š */
  box-shadow:
    var(--btn-inner-shine),
    0 10px 20px rgba(0, 0, 0, 0.3),
    /* åœ°é¢ã«è½ã¡ã‚‹å½± */ 0 0 20px rgba(255, 200, 255, 0.6); /* ã»ã®ã‹ãªç™ºå…‰ */

  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);

  /* è»½é‡åŒ–ãƒã‚¤ãƒ³ãƒˆï¼šallã§ã¯ãªãå¤‰åŒ–ã™ã‚‹ã‚‚ã®ã ã‘æŒ‡å®šã™ã‚‹ */
  transition:
    transform 0.2s ease-out,
    box-shadow 0.2s ease-out;
}

/* ãƒ„ãƒ¤ï¼ˆå…‰æ²¢éƒ¨åˆ†ï¼‰ */
.menu-btn::before {
  content: "";
  position: absolute;
  top: 0%;
  left: 3%;
  width: 93%;
  height: 25%;

  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 1) 0%,
    rgba(255, 255, 255, 0) 45%,
    rgba(255, 255, 255, 0) 100%
  );

  border-radius: 40px;
  mix-blend-mode: overlay;
  pointer-events: none;
}

/* --- ãƒ›ãƒãƒ¼æ™‚ï¼šæµ®ãä¸ŠãŒã‚‹ --- */
.menu-btn:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow:
    var(--btn-inner-shine),
    0 15px 30px rgba(0, 0, 0, 0.3),
    /* å½±ãŒé ããªã‚‹ */ 0 0 30px rgba(183, 105, 255),
    /* ç´«ã®å…‰ã‚’å¼·ã */ 0 0 15px rgba(255, 181, 161); /* ã‚ªãƒ¬ãƒ³ã‚¸ã®å…‰ã‚’è¶³ã™ */
}

/* --- ã‚¯ãƒªãƒƒã‚¯æ™‚ï¼šæŠ¼ã—è¾¼ã‚€ --- */
.menu-btn:active {
  transform: translateY(-1px) scale(0.98);
  /* å½±ã‚’å°ã•ãã—ã¦ã€Œåœ°é¢ã«è¿‘ã„ã€æ„Ÿã˜ã‚’å‡ºã™ */
  box-shadow:
    var(--btn-inner-shine),
    0 2px 5px rgba(0, 0, 0, 0.3),
    0 0 10px rgba(255, 200, 255, 0.4);
}

/* =========================================
   â˜…ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ï¼šåå‰å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ« (Twilight Pop Style)
   ========================================= */

/* ãƒãƒƒãƒ—ãªãƒ¢ãƒ¼ãƒ€ãƒ«ã®æ  */
.pop-modal-frame {
  --modal-grad: linear-gradient(
    130deg,
    hsl(234, 77%, 59%) 5%,
    #e281ff 70%,
    #ff65fc 100%
  );

  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  /* â˜…ã‚µã‚¤ã‚ºèª¿æ•´: æ¨ªé•· & é«˜ã•å›ºå®š */
  width: 750px;
  height: 350px;
  max-width: 90%;

  /* ä¸­èº«ã‚’ä¸Šä¸‹å·¦å³ä¸­å¤®ã«é…ç½®ã™ã‚‹è¨­å®š */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  /* ãƒˆãƒ¯ã‚¤ãƒ©ã‚¤ãƒˆé¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ */
  background: var(--modal-grad);
  border: 6px solid var(--color-creamorange); /* å†…å´ã®ã‚¯ãƒªãƒ¼ãƒ è‰²æ  */
  border-radius: 60px; /* ã‚«ãƒ—ã‚»ãƒ«å‹ */
  box-shadow: 
    /* â‘  2æœ¬ç›®ã®æ ï¼ˆã¼ã‹ã—0ã€åºƒãŒã‚Š6pxï¼‰â†’ ã“ã‚Œã§å¤–æ ã«è¦‹ãˆã‚‹ï¼ */
    0 0 0 6px var(--color-orange),
    /* â‘¡ ãã®å¤–å´ã®å½±ï¼ˆå…ƒã®ã‚„ã¤ï¼‰ */ 10px 10px 0 rgba(255, 183, 77, 0.4);
  padding: 20px;
  z-index: var(--z-modal);
  text-align: center;
  color: VAR(--color-gray);
  /* å…¨ä½“ã®ãƒ•ã‚©ãƒ³ãƒˆçµ±ä¸€ */
  font-family: "M PLUS Rounded 1c", "Arial Rounded MT Bold", sans-serif;
  font-weight: 800;
}

/* ãƒ©ãƒ™ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ */
.pop-label {
  --pop-label-shadow: 2px 2px 0 #ffe5e5, 4px 4px 0 rgba(0, 0, 0, 0.05);
  font-size: 1.8rem;
  color: var(--color-pink);
  margin-bottom: 15px;
  display: block;
  letter-spacing: 2px;
  text-shadow: var(--pop-label-shadow);
  line-height: 1.2;
}

/* å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ */
.pop-input {
  border: 4px solid var(--color-purple);
  background: var(--color-white);
  border-radius: 50px;
  padding: 12px 30px;
  font-size: 2rem;
  font-family: inherit;
  font-weight: 800;
  color: var(--color-darkgray);
  text-align: center;
  width: 70%; /* æ¨ªå¹…ã„ã£ã±ã„ */
  outline: none;
  transition: all 0.2s;
  box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.05);
}

.pop-input:focus {
  border-color: var(--color-orange);
  transform: scale(1.05);
  background: var(--color-white);
}

.pop-input::placeholder {
  color: var(--color-offwhite);
  font-weight: normal;
}

/* æ³¨é‡ˆãƒ†ã‚­ã‚¹ãƒˆ */
.pop-note {
  font-size: 1.2rem;
  color: var(--color-white);
  margin-top: 10px;
  font-weight: bold;
  opacity: 0.9;
}

/* ç¢ºèªç”»é¢ã®åå‰è¡¨ç¤º */
.confirm-name-disp {
  font-size: 2.6rem; /* åå‰ã‚’å°‘ã—å¤§ãã */
  font-weight: 900;
  color: var(--color-white);
  margin: 10px 0 20px 0;

  /* æ–‡å­—å‘¨ã‚Šã®è£…é£¾ */
  display: inline-block;
  padding: 0 20px;
  text-shadow: 3px 3px 0 rgba(0, 0, 0, 0.1);
}

/* --- ãƒœã‚¿ãƒ³è¨­å®š --- */

/* ãƒœã‚¿ãƒ³å…±é€š (ãƒ™ãƒ¼ã‚¹ã¯ã‚°ãƒ¬ãƒ¼/æˆ»ã‚‹ãƒœã‚¿ãƒ³ç”¨) */
.pop-btn {
  border: none;
  border-radius: 50px;
  padding: 10px 40px;
  font-size: 1.4rem;
  font-family: inherit;
  font-weight: 800;
  cursor: pointer;
  margin: -5px 10px 10px;
  transition: all 0.1s;
  position: relative;
  top: 0;

  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰²ï¼ˆæˆ»ã‚‹ãƒœã‚¿ãƒ³ãªã©ï¼‰ */
  background: var(--pop-bg);
  color: var(--color-darkblue);
  box-shadow: 0 6px 0 #90a4ae;
}

/* ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ (OK/ã¯ã„) - ä¸Šæ›¸ãè¨­å®š */
.pop-btn.primary {
  --pop-btn-grad: linear-gradient(
    135deg,
    hsl(42, 100%, 65%) 0%,
    #ffa442 40%,
    #d8a4ff 100%
  );
  background: var(--pop-btn-grad);
  color: var(--color-white);
  box-shadow: 0 6px 0 #d96441;
}

/* ãƒ›ãƒãƒ¼ãƒ»ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‹•ã */
.pop-btn:hover {
  top: -2px;
  filter: brightness(1.1);
}

/* æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®å½±(hover) */
.pop-btn:hover {
  box-shadow: 0 8px 0 rgba(0, 0, 0, 0.2);
}

/* ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã®å½±(hover) */
.pop-btn.primary:hover {
  box-shadow: 0 8px 0 #d84315;
}

.pop-btn:active {
  top: 6px;
  box-shadow: 0 0 0; /* å½±ãªã— */
}

/* é›£æ˜“åº¦é¸æŠç”»é¢ UI */
#difficulty-view {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 50px;
  width: 100%;
  height: 100%;
}

.diff-view-title {
  --diff-title-shadow:
    0 0 10px rgba(255, 255, 255, 0.8), 2px 2px 0px rgba(100, 100, 255, 0.8),
    0 5px 15px rgba(0, 0, 0, 0.7);
  margin: 0;
  font-family: var(--font-pop-fredoka);
  font-size: 4.3rem;
  color: var(--color-lightorange);
  letter-spacing: 0.1em;
  text-shadow: var(--diff-title-shadow);
}

.diff-main-container {
  display: flex;
  gap: 85px;
}

.diff-button-menu {
  display: flex;
  flex-direction: column;
  gap: 40px;
}

/* ãƒ™ãƒ¼ã‚¹ã®ãƒœã‚¿ãƒ³è¨­å®š */
.diff-btn {
  --glass-shine:
    inset 5px 5px 15px rgba(255, 255, 255, 0.8),
    inset -3px -3px 8px rgba(255, 255, 255, 0.4);

  position: relative;
  overflow: hidden;
  width: 270px;
  padding: 12px 0;
  font-family: var(--font-pop);
  font-size: 1.8rem;
  color: var(--color-white);
  border-radius: 50px;
  border: 4px solid var(--color-white);
  transition: all 0.1s ease;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
  padding: 15px;
  line-height: 1;
  cursor: pointer;

  /* ãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹ã§ã‚‚å¤‰æ•°ã‚’é©ç”¨ã—ã¦ãŠã */
  box-shadow:
    var(--glass-shine),
    0 5px 15px rgba(0, 0, 0, 0.15);
}

.diff-btn:hover {
  transform: translateY(-4px);
}

.diff-btn:active {
  transform: translateY(4px);
  /* ã‚¯ãƒªãƒƒã‚¯æ™‚ã‚‚ã€Œã‚¬ãƒ©ã‚¹æ„Ÿã€ã ã‘ã¯æ®‹ã—ã¤ã¤ã€å½±(0 8px 0)ã‚’æ¶ˆã™ */
  box-shadow:
    var(--glass-shine),
    0 0 0 rgba(0, 0, 0, 0);
}

/* --- é›£æ˜“åº¦åˆ¥ã®è‰²è¨­å®š --- */
.diff-btn.easy {
  background: linear-gradient(135deg, #74ebd5 0%, #aee8ff 100%);
  box-shadow:
    var(--glass-shine),
    0 8px 0 #3ecfcf,
    0 15px 20px rgba(255, 255, 255, 0.2);
}

.diff-btn.normal {
  background: linear-gradient(135deg, #90ff64 0%, #c1ffb2 100%);
  box-shadow:
    var(--glass-shine),
    0 8px 0 #54d618,
    0 15px 20px rgba(255, 255, 255, 0.2);
}

.diff-btn.hard {
  background: linear-gradient(135deg, #ffff00 0%, #fff891 100%);
  box-shadow:
    var(--glass-shine),
    0 8px 0 #d4d600,
    0 15px 20px rgba(255, 255, 255, 0.2);
  color: #5c5c00;
}

.diff-btn#btn-back {
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
  box-shadow:
    var(--glass-shine),
    0 8px 0 #ff758c,
    0 15px 20px rgba(255, 255, 255, 0.2);
}

/* --- ãƒ¡ã‚¤ãƒ³æƒ…å ±ãƒ‘ãƒãƒ« --- */
.diff-info-panel {
  position: relative;
  padding: 30px 40px 40px 40px;
  width: 600px;
  height: 400px;
  display: flex;
  flex-direction: column;

  /* ã‚¬ãƒ©ã‚¹è¨­å®š */
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  border-radius: 40px;
  border: none;
  box-shadow: var(--shine-panel-base); /* â˜…å¤‰æ•°é©ç”¨ */

  transition: opacity 0.2s ease;
}

.diff-info-panel:not(.visible) {
  opacity: 0;
}

/* --- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ— --- */
.diff-header-group {
  position: absolute;
  top: 20px;
  right: 26px;
  display: flex;
  gap: 15px;
  z-index: var(--z-diff-header);
}

/* --- ğŸ‘‘ ç‹å† ã‚¢ã‚¤ã‚³ãƒ³ --- */
.crown-icon-only {
  width: 40px;
  height: 36px;
  background: var(--glass-bg-light);
  border-radius: 12px;
  border: none;
  display: flex;
  cursor: pointer;
  padding: 2px;
  box-shadow: var(--shine-icon-base); /* â˜…å¤‰æ•°é©ç”¨ */
  transition: all 0.2s ease;
}

.crown-icon-only:hover {
  transform: scale(1.1) translateY(-2px);
  background: rgba(255, 255, 255, 0.25);
  box-shadow: var(--shine-icon-hover); /* â˜…å¤‰æ•°é©ç”¨ */
}

.crown-icon-only:active {
  transform: scale(0.95) translateY(0);
  background: rgba(255, 255, 255, 0.1);
  box-shadow: var(--shine-icon-active); /* â˜…å¤‰æ•°é©ç”¨ */
}

/* --- ğŸ“Š ãƒã‚¤ã‚¹ã‚³ã‚¢è¡¨ç¤ºãƒœãƒƒã‚¯ã‚¹ --- */
.diff-hiscore-box {
  min-width: 310px;
  justify-content: space-between;
  padding: 2.5px 12px;

  background: var(--glass-bg-dark);
  border-radius: 20px;
  border: none;
  box-shadow: var(--shine-darkbox-base); /* â˜…å¤‰æ•°é©ç”¨ */

  display: flex;
  align-items: center;
  font-family: var(--font-pop-fredoka);
  color: var(--color-gold);
  text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
  font-size: 1.2rem;
}

/* ãƒ©ãƒ™ãƒ«ã‚°ãƒ«ãƒ¼ãƒ— */
.hiscore-label-group {
  display: flex;
  align-items: center;
  gap: 10px;
}

.diff-hiscore-box .label {
  font-size: 1rem;
  color: var(--color-white);
  margin: 0;
}

/* --- ğŸ“ è©³ç´°ãƒœã‚¿ãƒ³ --- */
.hiscore-detail-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;

  background: var(--glass-bg-light);
  color: #fff;

  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  font-size: 1rem;

  box-shadow: var(--shine-detail-base); /* â˜…å¤‰æ•°é©ç”¨ */
  transition: all 0.2s ease;
}

.hiscore-detail-btn:hover {
  transform: scale(1.15);
  background: rgba(255, 255, 255, 0.3);
  box-shadow: var(--shine-detail-hover); /* â˜…å¤‰æ•°é©ç”¨ */
}

.hiscore-detail-btn:active {
  transform: scale(0.9);
  background: rgba(255, 255, 255, 0.4);
  box-shadow: var(--shine-detail-active); /* â˜…å¤‰æ•°é©ç”¨ */
}

/* --- ãƒ†ã‚­ã‚¹ãƒˆç³»ãƒ»ãã®ä»–ï¼ˆå¤‰æ›´ãªã—ï¼‰ --- */
#menu-hiscore-val {
  font-family: var(--font-main);
  font-variant-numeric: tabular-nums;
  font-weight: bold;
  font-size: 1.6rem;
  color: var(--color-white);
  text-shadow: 0 0 5px rgba(255, 215, 0, 0.6);
  line-height: 1;
  min-width: 140px;
  text-align: right;
  display: inline-block;
}

#display-diff-name {
  font-family: "Fredoka One", cursive;
  font-size: 3.5rem;
  color: var(--color-white);
  line-height: 1;
  padding-top: 40px;
  text-shadow:
    3px 3px 0px rgba(0, 0, 0, 0.2),
    0px 0px 10px rgba(0, 0, 0, 0.5);
}

#display-diff-text {
  flex-grow: 1;
  font-size: 1.2rem;
  line-height: 6;
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  scrollbar-width: none;
}

.diff-info-footer {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding-top: 20px;
  border-top: 2px dashed rgba(255, 255, 255, 0.4);
}

.status-item {
  font-size: 2.2rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 15px;
  line-height: 1;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
}

#display-diff-time {
  color: var(--color-aquablue);
  letter-spacing: 1px;
}
#display-diff-time::before {
  content: "TIME:â³";
  font-size: 2.6rem;
  text-shadow: 0 0 5px rgba(0, 255, 255, 0.6);
}

#display-diff-chars {
  color: var(--color-pink);
}

#display-diff-chars::before {
  content: "CHAR:âŒ¨ï¸";
  font-size: 2.6rem;
  text-shadow: 0 0 5px rgba(255, 100, 100, 0.6);
}

/* =========================================
   â˜…ãƒ—ãƒ¬ã‚¤ç”»é¢ UI (HUD)
   ========================================= */
#game-hud {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-game-hud);
  pointer-events: none;
}

/* App.css ã®ä¸€ç•ªä¸‹ãªã©ã«è¿½åŠ  */
.blink-guide {
  animation: blink-anim 1.5s infinite ease-in-out;
  color: rgba(255, 255, 255, 0.9);
  font-family: var(--font-main);
  font-weight: bold;
  font-size: 1.4rem;
  text-shadow: 0 0 10px rgba(249, 182, 255, 0.5);
  pointer-events: none; /* ã‚¯ãƒªãƒƒã‚¯ã‚’é‚ªé­”ã—ãªã„ */
}

@keyframes blink-anim {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 1;
  }
}

.score-container {
  position: absolute;
  bottom: 25px;
  left: 30px;
  font-family: var(--font-pop-fredoka);
  font-size: 40px;
  color: var(--color-white);
  text-shadow: 2px 2px 0 #000;
}

.score {
  font-family: var(--font-pop-fredoka);
  font-variant-numeric: tabular-nums;
  letter-spacing: 5px;
  display: inline-block;
  min-width: 200px;
  text-align: right;
  font-size: 40px;
}

/* ã‚¹ã‚³ã‚¢ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— */
.score-popups {
  position: relative;
  top: -80px;
  left: 100%;
  width: 0;
  height: 0;
  pointer-events: none;
}

/* ãƒ™ãƒ¼ã‚¹ã®å®šç¾© */
.score-popup-item {
  /* --- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ (Normal) --- */
  --p-color: var(--color-white);
  --p-stroke: 1px var(--color-black);
  --p-shadow: 2px 2px 0px rgba(0, 0, 0, 0.3);
  --p-size: 30px;
  --p-anim: popup-normal 0.4s ease-out forwards;

  /* --- å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  white-space: nowrap;

  font-family: var(--font-pop-fredoka);
  font-weight: bold;

  /* --- å¤‰æ•°ã‚’é©ç”¨ --- */
  color: var(--p-color);
  font-size: var(--p-size);
  -webkit-text-stroke: var(--p-stroke);

  text-shadow: var(--p-shadow);

  animation: var(--p-anim);
}

/* ã‚´ãƒ¼ãƒ«ãƒ‰ */
.popup-gold {
  --p-color: var(--color-gold);
  --p-stroke: 1px #8b4500;
  --p-shadow: 2px 2px 0px var(--color-white);
  --p-size: 32px;
  --p-anim: popup-normal 0.55s ease-out forwards;
}

/* ãƒŸã‚¹ */
.popup-miss {
  --p-color: var(--color-red);
  --p-stroke: 1px var(--color-white);
  --p-shadow: none; /* å½±ãªã— */
  --p-size: 24px;
  --p-anim: popup-miss 0.8s ease-in forwards;
}

/* ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ */
.popup-rainbow {
  --p-stroke: 1px rgba(255, 255, 255, 0.8);
  --p-size: 40px;
  --p-anim: popup-rainbow 1.3s ease-out forwards;

  background: linear-gradient(
    to right,
    #ff0000,
    #ffff00,
    #00ff00,
    #00ffff,
    #0000ff,
    #ff00ff
  );
  background-clip: text;
  color: transparent;
  filter: drop-shadow(2px 2px 0px rgba(0, 0, 0, 0.5));
  text-shadow: none;
}
@keyframes popup-normal {
  0% {
    opacity: 0;
    transform: translateY(10px) scale(0.8);
  }
  20% {
    opacity: 1;
    transform: translateY(0) scale(1.2);
  }
  80% {
    opacity: 1;
    transform: translateY(-10px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-28px) scale(1);
  }
}

@keyframes popup-rainbow {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.5) rotate(-10deg);
  }
  15% {
    opacity: 1;
    transform: translateY(0) scale(1.5) rotate(0deg);
  }
  80% {
    opacity: 1;
    transform: translateY(-20px) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateY(-55px) scale(1.5);
  }
}

@keyframes popup-miss {
  0% {
    opacity: 0;
    transform: translateY(-10px);
  }
  20% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(20px) rotate(10deg);
  }
}

#tmr-box {
  position: relative;
  top: -70px;
  left: 15.5px;
  width: 305px;
  height: 320px;
  display: flex;
  justify-content: center;
  align-items: center;
}

#tmr-img {
  position: absolute;
  width: 100%;
  height: auto;
}

#tmr-text {
  --shadow-color: var(--color-aquablue);
  position: relative;
  right: -2.5px;
  bottom: -8px;
  font-family: var(--font-pop-fredoka);
  font-size: 75px;
  font-weight: bold;
  letter-spacing: 5px;
  color: rgba(95, 234, 255, 1);
  text-shadow:
    -2px -2px 0 var(--color-white),
    2px 2px 0 var(--color-white),
    4px 4px 0 var(--shadow-color),
    /* ğŸ‘ˆ ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆï¼ */ 8px 8px 20px rgba(0, 0, 0, 0.4);

  /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚‚è¦ªã«æŒãŸã›ã¦OK */
  transition:
    transform 0.2s,
    color 0.2s,
    text-shadow 0.2s;
}

/* æ¼”å‡ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
#tmr-text.time-plus {
  /* â‘¢ ä¸Šæ›¸ãã—ãŸã„æ™‚ã ã‘ã€å¤‰ã®ä¸­èº«ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ */
  --shadow-color: var(--color-green);

  /* ãƒ†ã‚­ã‚¹ãƒˆè‡ªä½“ã®è‰²ã‚‚å¤‰ãˆã‚‹ãªã‚‰ */
  color: var(--color-green);
  transform: scale(1.3);
}

/* ãƒ”ãƒ³ãƒï¼ˆæ®‹ã‚Šæ™‚é–“ã‚ãšã‹ï¼‰ */
#tmr-text.timer-pinch {
  /* â‘  å½±ã®è‰²å¤‰æ•°ã‚’ã€Œãƒ”ãƒ³ã‚¯ã€ã«ä¸Šæ›¸ã */
  /* ã“ã‚Œã ã‘ã§ã€è¦ªã§å®šç¾©ã—ãŸ text-shadow ã® 3ç•ªç›®ã®è‰²ãŒå…¥ã‚Œæ›¿ã‚ã‚‹ */
  --shadow-color: #ff9eb5;

  /* â‘¡ æ–‡å­—è‰²ã‚’ã€Œèµ¤ã€ã«å¤‰æ›´ */
  color: rgba(255, 36, 113, 1);

  /* â‘¢ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  animation: blink 0.8s infinite alternate;
}

/* çµ‚äº†æ™‚ (0ç§’) */
#tmr-text.timer-zero {
  color: rgba(255, 36, 113, 1);
  --shadow-color: #ff9eb5; /* å½±ã‚‚èµ¤ç³»ã« */
}

.bonus-pop {
  position: absolute;
  top: 230px;
  left: 50%;
  font-weight: bold;
  pointer-events: none;
  white-space: nowrap;
  animation: popUpFade 1s ease-out forwards;
}

.bonus-pop.normal {
  font-size: 25px;
  color: var(--color-green);
  text-shadow:
    1px 1px 0 var(--color-gold),
    0 0 5px var(--color-orange),
    2px 2px 5px rgba(237, 146, 255, 0.5);
}

.bonus-pop.large {
  font-size: 45px;
  top: 200px;
  background: linear-gradient(180deg, #ffea00 0%, #ff0099 50%, #00e5ff 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  -webkit-text-stroke: 2px var(--color-white);
  filter: drop-shadow(4px 4px 0px var(--color-black));
}

@keyframes blink {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 1;
    transform: scale(1.1);
  }
}

/* ã‚¿ã‚¤ãƒ åŠ ç®—ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— */
@keyframes popUpFade {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(20px) scale(0.5);
  }
  20% {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) translateY(-60px) scale(1);
  }
}

/* ãŠé¡Œãƒãƒ¼ãƒŸã‚¹æ™‚PEAFECTæ¼”å‡º */
.perfect-item {
  position: absolute;
  overflow: visible;
  pointer-events: none;
  top: 160px;
  left: 172px;
  white-space: nowrap;
  font-family: "Mochiy Pop P One", sans-serif;
  font-size: 35px;
  font-weight: 900;
  background: linear-gradient(180deg, #fff700 0%, #ff8800 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
  animation: floatUpPerfect 0.4s ease-out forwards;
}

@keyframes floatUpPerfect {
  0% {
    opacity: 0;
    transform: translate(-50%, 30px);
  }
  20% {
    opacity: 1;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
}

#center-area {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

#text-word-wrapper {
  display: inline-block;
  position: relative;
}

#text-word {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border: 7px solid var(--color-aquablue);
  border-radius: 40px;
  background: var(--game-word-bg);
  gap: 8px;
  white-space: nowrap;
}

#romaji-line {
  font-size: 35px;
  letter-spacing: 0.08rem;
  font-weight: 650;
  text-shadow: 2px 2px 4px var(--color-black);
  line-height: 1.2;
}

#jp-line {
  font-family: var(--font-main);
  font-size: 43px;
  font-weight: 750;
  color: var(--color-milkywhite);
  line-height: 1.2;
  text-shadow: 2px 2px 0 var(--color-black);
  letter-spacing: 0.05rem;
}

#full-roma {
  font-size: 35px;
  font-weight: 650;
  color: var(--color-aquablue);
  letter-spacing: 0.08rem;
  line-height: 1;
}

.text-yellow {
  color: var(--color-yellow);
  text-shadow: 0 0 5px var(--color-darkorange);
  text-decoration: underline;
  text-underline-offset: 6px;
  text-decoration-thickness: 3px;
  text-decoration-skip-ink: none;
}

.text-red {
  color: var(--color-red);
  text-shadow: 0 0 5px var(--color-red);
}

#rank-monitor {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-family: var(--font-pop-fredoka);
  font-size: 35px;
  color: var(--color-white);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  white-space: nowrap;
}

#rank-monitor .rank-s {
  color: var(--color-gold);
  text-shadow: 0 0 15px var(--color-gold);
}

#rank-monitor .rank-a {
  color: var(--color-red);
  text-shadow: 0 0 10px;
}

#rank-monitor .rank-b {
  color: var(--color-oceanblue);
  text-shadow: 0 0 10px var(--color-aquablue);
}

#rank-monitor .rank-c {
  color: var(--color-green);
  text-shadow: 0 0 10px var(--color-green);
}

#rank-monitor .rank-d {
  color: var(--color-gray);
  text-shadow: 2px 2px 0 var(--color-black);
}

#rank-value {
  font-size: 55px;
  font-weight: 900;
  margin-left: 10px;
  transition:
    transform 0.2s ease,
    color 0.2s;
}

/* ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ (å¤‰æ›´ãªã—) */
.combo-pop-anim {
  display: block;
  margin: 0 auto;
  width: fit-content;
  animation: combo-shrink-pop 0.5s cubic-bezier(0.24, 1.86, 0.93, 1);
  transform: translateZ(0); /* GPUå¼·åˆ¶ */
  transform-origin: center center;
}

@keyframes combo-shrink-pop {
  0% {
    transform: scale(0.75);
  }
  75% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* ã‚³ãƒ³ãƒœè¡¨ç¤ºã‚¨ãƒªã‚¢ (å¤‰æ›´ãªã—) */
#combo-box {
  position: absolute;
  top: 180px;
  right: 95px;
  width: 200px;
  text-align: center;
}

#combo-count,
#combo-label {
  transition:
    color 0.1s ease-out,
    filter 0.1s ease-out;
}

/* â–¼ é€šå¸¸æ™‚ã®ã‚³ãƒ³ãƒœæ•° (ãƒã‚¤ãƒ«ãƒ‰ç‰ˆ) */
#combo-count {
  font-size: 62px;
  font-weight: bold;
  line-height: 1;

  /* â˜…ä¿®æ­£: ã¼ã‹ã—ã‚’å°ã•ãã—ã€è‰²ã‚’åŠé€æ˜ã«ã—ã¦å…‰ã‚’å¼±ã‚ã‚‹ */
  filter: drop-shadow(0 0 4px rgba(209, 110, 255, 0.7)) /* ç™ºå…‰ã‚’æŠ‘ãˆã‚ã« */
    drop-shadow(2px 2px 0 #b030ff); /* ãã£ãã‚Šå½±ã¯ãã®ã¾ã¾ */
}

/* â–¼ é€šå¸¸æ™‚ã®ãƒ©ãƒ™ãƒ« (ãƒã‚¤ãƒ«ãƒ‰ç‰ˆ) */
#combo-label {
  font-size: 24px;
  color: var(--color-white);
  /* â˜…ä¿®æ­£: ã“ã¡ã‚‰ã‚‚å°‘ã—å¼±ã‚ã‚‹ */
  filter: drop-shadow(0 0 1px rgba(209, 110, 255, 0.5));
}

/* â–¼ 100ã‚³ãƒ³ãƒœï¼ˆé‡‘ - ãƒã‚¤ãƒ«ãƒ‰ç‰ˆï¼‰ */
#combo-count.is-gold,
#combo-label.is-gold {
  color: var(--color-gold);
  transform: scale(1.1);

  /* â˜…ä¿®æ­£: é‡‘è‰²ã®ã‚®ãƒ©ã‚®ãƒ©æ„Ÿã‚’æŠ‘ãˆã‚‹ */
  filter: drop-shadow(0 0 1px rgba(255, 215, 0, 0.7)) /* åŠé€æ˜ã®é‡‘è‰²ã®å…‰ */
    drop-shadow(0.04em 0.04em 0 var(--color-darkorange));
}

/* â–¼ 200ã‚³ãƒ³ãƒœï¼ˆè™¹è‰²ï¼‰ */
#combo-count.is-rainbow,
#combo-label.is-rainbow {
  /* â–¼ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç³»: çœŸã‚“ä¸­ã«ç½®ããŸã‚ã«å¿…è¦ */
  width: fit-content;
  margin: auto;
  /* â–¼ ä¿®æ­£: ç¸å–ã‚Š(stroke)ã‚„ãƒ•ã‚©ãƒ³ãƒˆã®ãƒãƒŸå‡ºã—å¯¾ç­–ã¨ã—ã¦ã€å·¦å³ã«å°‘ã—ä½™ç™½ã‚’é–‹ã‘ã‚‹ */
  padding-left: 0.2em;
  padding-right: 0.2em;

  /* â–¼ è™¹è‰²ã«ã™ã‚‹é­”æ³•: ã“ã®3è¡Œã‚»ãƒƒãƒˆã¯å¿…é ˆï¼ */
  color: transparent; /* æ–‡å­—ã‚’é€æ˜ã« */
  background: linear-gradient(
    90deg,
    rgba(255, 0, 0, 0.6),
    rgba(255, 165, 0, 0.6),
    rgba(255, 255, 0, 0.6),
    rgba(0, 255, 0, 0.6),
    rgba(0, 255, 255, 0.6),
    rgba(0, 0, 255, 0.6),
    rgba(238, 130, 238, 0.6)
  );
  -webkit-background-clip: text; /* Chrome/Safariç”¨ */
  background-clip: text;

  /* â–¼ è£…é£¾ç³» */
  -webkit-text-stroke: 0.14em rgba(255, 255, 255, 0.5);
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
  transform: scale(1.1);
  white-space: nowrap;
  z-index: 1;
}

/* è™¹è‰²ç”¨ã®ç–‘ä¼¼è¦ç´  (å¤‰æ›´ãªã—) */
#combo-count.is-rainbow::after,
#combo-label.is-rainbow::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  color: var(--color-white);
  white-space: nowrap;
  -webkit-text-stroke: 0;
  z-index: 2;
}

#combo-count.is-rainbow {
  font-weight: 800;
  letter-spacing: 0.03em;
}

#combo-label.is-rainbow {
  font-weight: 800;
  transform: scale(1.2);
}

/* ãƒ™ãƒ¼ã‚¹ï¼šæ§‹é€ ã¨å…±é€šå¤‰æ•°ã‚’å®šç¾© */
#combo-meter {
  position: absolute;
  top: 50px;
  right: 70px;
  width: 600px;
  padding: 14px 16px 16px;
  border: 5px solid;
  border-radius: 14px;
  user-select: none;

  background: var(--meter-bg);
  border-color: var(--meter-border);
  box-shadow: 0 10px 30px var(--meter-shadow);

  /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼šãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ™‚ã«ãƒ•ãƒ¯ãƒƒã¨è‰²ãŒå¤‰ã‚ã‚‹ */
  transition:
    background 0.3s,
    border-color 0.3s,
    box-shadow 0.3s;
}

/* å„ãƒ†ãƒ¼ãƒï¼šä¸­èº«ã®ã€Œè‰²ã€ã ã‘ã‚’æ³¨å…¥ã™ã‚‹ */
#combo-meter.theme-easy {
  --meter-bg: rgba(100, 200, 255, 0.85);
  --meter-border: var(--color-aquablue);
  --meter-shadow: rgba(100, 230, 255, 0.5);
}

#combo-meter.theme-normal {
  --meter-bg: rgba(244, 156, 105, 0.85);
  --meter-border: var(--color-lightorange);
  --meter-shadow: rgba(255, 150, 50, 0.4);
}

#combo-meter.theme-hard {
  --meter-bg: rgba(65, 36, 149, 0.85);
  --meter-border: var(--color-lightpurple);
  --meter-shadow: rgba(200, 50, 255, 0.5);
}

.meter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 21px;
  font-weight: bold;
}

.theme-easy .meter-header {
  color: var(--color-white);
  text-shadow: 0 2px 4px rgba(0, 100, 200, 0.8);
}

.theme-normal .meter-header {
  color: var(--color-yellow);
  text-shadow: 0 2px 4px rgba(255, 98, 127, 0.8);
}

.theme-hard .meter-header {
  color: var(--color-lightblue);
  text-shadow: 0 0 8px rgba(0, 255, 255, 0.8);
}

#meter-bar {
  width: 100%;
  height: 20px;
  background: var(--color-gray);
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid var(--color-white);
}

#meter-fill {
  height: 100%;
  background: linear-gradient(90deg, #ff0055 0%, #ffcc00 50%, #00ff00 100%);
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.6);
  transition: width 0.15s ease-out;
}

/* çµ±è¨ˆ & ãƒ¯ãƒ¼ãƒ‰æ•° */
#word-counter {
  position: absolute;
  bottom: 120px;
  right: 110px;
  border: 4px solid var(--color-milkywhite);
  border-radius: 15px;
  padding: 40px 30px;
  background: rgba(0, 0, 0, 0.3);
  text-align: center;
  pointer-events: none;
  min-width: 100px;
  height: 100px;
  display: flex;
  justify-content: center;
  align-items: center;
}

#word-counter legend {
  color: #42f5bf;
  font-weight: bold;
  font-size: 15px;
}

#stat-words {
  display: block;
  font-weight: 800;
  font-size: 54px;
  color: var(--color-white);
  line-height: 1;
  text-shadow: 0 0 20px rgba(66, 245, 191, 0.8);
}

#hud-stats {
  position: absolute;
  bottom: 30px;
  right: 60px;
  font-family: var(--font-pop-fredoka);
  font-size: 33px;
  letter-spacing: 0.02em;
  text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
  pointer-events: none;
}

.speed-label {
  color: #42f5bf;
}

#stat-speed {
  color: rgb(222, 245, 198);
  font-weight: bold;
}

.light-shake {
  animation: lightShake 0.2s ease;
}

.error-shake {
  animation: shakeAndFlash 0.4s ease;
}

@keyframes shakeAndFlash {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-10px);
    border-color: var(--color-red);
    background-color: rgba(255, 0, 0, 0.2);
  }
  50% {
    transform: translateX(10px);
    border-color: var(--color-red);
  }
  75% {
    transform: translateX(-10px);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes lightShake {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-4px);
    border-color: var(--color-redpink);
  }
  50% {
    transform: translateX(4px);
    border-color: var(--color-redpink);
  }
  75% {
    transform: translateX(-4px);
  }
  100% {
    transform: translateX(0);
  }
}

.rainbow-glow {
  position: relative;
}

.rainbow-glow::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 14px; /* è¦ªè¦ç´ ã¨åˆã‚ã›ã‚‹ã®ã‚’å¿˜ã‚Œãšã«ï¼ */
  pointer-events: none; /* ã“ã‚Œã¯ã‚¯ãƒªãƒƒã‚¯é€éã®ãŸã‚ã«é‡è¦ï¼æ®‹ã™ï¼ */

  animation:
    rainbow-inner 3s linear infinite,
    /* è™¹è‰²ãƒ«ãƒ¼ãƒ— */ glowFadeIn 0.5s ease-out forwards; /* å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */

  /* ãƒãƒ©ã¤ãé˜²æ­¢ï¼šåˆæœŸçŠ¶æ…‹ã‚’é€æ˜ã«ã—ã¦ãŠã */
  opacity: 0;
}

/* è™¹è‰²ã‚°ãƒ­ãƒ¼ */
@keyframes rainbow-inner {
  /* box-shadowã®insetã¯å…±é€šãªã®ã§ã€è‰²ã®å¤‰åŒ–ã ã‘è¨˜è¿°ã™ã‚Œã°OK */
  0% {
    box-shadow: inset 0 0 80px 10px rgb(255, 188, 188);
  }
  15% {
    box-shadow: inset 0 0 80px 10px rgb(255, 255, 174);
  }
  30% {
    box-shadow: inset 0 0 80px 10px rgb(196, 255, 196);
  }
  45% {
    box-shadow: inset 0 0 80px 10px rgb(193, 255, 255);
  }
  60% {
    box-shadow: inset 0 0 80px 10px rgb(192, 192, 255);
  }
  75% {
    box-shadow: inset 0 0 80px 10px rgb(255, 185, 255);
  }
  100% {
    box-shadow: inset 0 0 80px 10px rgb(255, 176, 176);
  }
}

@keyframes glowFadeIn {
  to {
    opacity: 1;
  }
}

@keyframes glowFadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* --- FINISH Banner --- */
#finish-banner {
  position: absolute;
  top: -250px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 180px;
  font-weight: bold;
  color: var(--color-gold);
  text-shadow:
    0 0 20px rgba(255, 221, 0, 0.8),
    4px 4px 0 var(--color-black);
  z-index: var(--z-game-finish);
  transition:
    top 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275),
    opacity 0.5s;
  opacity: 0;
}

#finish-banner.show {
  top: 35%;
  opacity: 1;
}

#finish-banner.exit {
  top: -250px;
  opacity: 0;
  transition:
    top 0.5s ease-in,
    opacity 0.5s ease-in;
}

.bg-blur {
  filter: blur(8px);
  transition: filter 0.4s ease-in-out;
}

/* â˜…é‡è¦: ãƒ•ã‚§ãƒ¼ãƒ‰ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¯ã‚¯ãƒªãƒƒã‚¯ã‚’é‚ªé­”ã—ãªã„ */
#fade-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--color-white);
  opacity: 0;
  pointer-events: none;
  z-index: var(--z-fade-overlay);
  transition: opacity 0.4s ease-in-out;
}

/* =========================================
   ãƒªã‚¶ãƒ«ãƒˆç”»é¢ (Result Screen)
   ========================================= */
#result-screen {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  max-width: 1100px;
  height: 92%;
  max-height: 780px;
  /* ä½™ç™½èª¿æ•´ */
  padding: 15px 20px;
  backdrop-filter: blur(15px);
  border-radius: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;

  background: linear-gradient(
    to bottom,
    var(--theme-bg-top),
    var(--theme-bg-bot)
  );

  border: 2px solid var(--theme-border);

  box-shadow:
    0 0 20px var(--theme-glow),
    0 20px 50px rgba(0, 0, 0, 0.5);

  transition:
    background 0.5s,
    border-color 0.5s,
    box-shadow 0.5s;
}

/* --- EASY ãƒ†ãƒ¼ãƒ --- */
.res-theme-easy {
  --theme-bg-top: rgba(134, 182, 224, 0.7);
  --theme-bg-bot: rgba(185, 237, 255, 0.6);
  --theme-border: rgba(150, 230, 255, 0.6);
  --theme-glow: rgba(0, 200, 255, 0.4);
}

/* --- NORMAL ãƒ†ãƒ¼ãƒ --- */
.res-theme-normal {
  --theme-bg-top: rgba(40, 20, 60, 0.7);
  --theme-bg-bot: rgba(180, 60, 100, 0.6);
  --theme-border: rgba(255, 180, 200, 0.5);
  --theme-glow: rgba(255, 100, 150, 0.5);
}

/* --- HARD ãƒ†ãƒ¼ãƒ --- */
.res-theme-hard {
  --theme-bg-top: rgba(10, 10, 40, 0.8);
  --theme-bg-bot: rgba(60, 40, 100, 0.7);
  --theme-border: rgba(255, 215, 0, 0.4);
  --theme-glow: rgba(100, 80, 255, 0.4);
}

.result-title {
  font-family: var(--font-pop-fredoka);
  font-size: 3.5rem;
  color: var(--color-white);
  text-shadow:
    4px 4px 0px var(--color-creamorange),
    6px 6px 15px rgba(0, 0, 0, 0.5);
  letter-spacing: 5px;
}

.result-grid {
  display: flex;
  gap: 20px;
  width: 100%;
  flex-grow: 1;
}

.result-left-col {
  display: flex;
  flex-direction: column;
  gap: 15px;
  flex: 1;
}

.col-right {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.score-big-container {
  background: rgba(218, 212, 228, 0.4);
  border-radius: 20px;
  padding: 5px 25px;
  position: relative;
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: inset 0 0 20px rgba(235, 235, 255, 0.2);
  min-height: 155px;
}

.score-header-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.score-main-row {
  display: flex;
  justify-content: flex-end;
}

.score-val-huge {
  font-family: var(--font-pop-fredoka);
  font-size: 4.3rem;
  color: var(--color-hotpink);
  text-shadow:
    4px 4px 0 #fbe7ff,
    6px 6px 10px rgba(0, 0, 0, 0.2);
  line-height: 0.7;
  letter-spacing: 4px;
}

.score-label-main {
  font-family: var(--font-pop-fredoka);
  font-size: 46px;
  color: var(--color-white);
  text-shadow:
    3px 3px 0px var(--color-creamorange),
    4px 4px 10px rgba(0, 0, 0, 0.2);
  letter-spacing: 2px;
  margin-bottom: 6px;
}

.hiscore-block {
  background: rgba(0, 0, 0, 0.15);
  padding: 1px 14px;
  border-radius: 20px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 240px;
}

.hiscore-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
}

.hiscore-label {
  font-size: 0.9rem;
  color: var(--color-milkywhite);
  font-family: var(--font-pop-fredoka);
}

.hiscore-value {
  font-size: 1.4rem;
  color: var(--color-white);
  font-family: var(--font-pop-fredoka);
  letter-spacing: 0.5px;
}

.score-diff {
  font-family: var(--font-pop-fredoka);
  font-size: 16px;
  letter-spacing: 0.5px;
}

.diff-plus {
  color: var(--color-gold);
  text-shadow: 1px 1px 0 #b8860b;
}

.diff-minus {
  color: var(--color-redpink);
  text-shadow: 1px 1px 0 #8b0000;
}

.diff-zero {
  color: var(--color-milkywhite);
}

.stats-compact-container {
  background: rgba(218, 212, 228, 0.4);
  border-radius: 20px;
  padding: 15px 25px;
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  flex-grow: 1;
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: inset 0 0 20px rgba(235, 235, 255, 0.2);
}

.stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px dotted rgba(255, 255, 255, 0.3);
}

.stat-label {
  font-family: var(--font-pop-fredoka);
  font-size: 1.6rem;
  color: var(--color-milkywhite);
  text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
}

.stat-val {
  font-family: var(--font-pop-fredoka);
  font-size: 26px;
  font-weight: bold;
  color: var(--val-color);
  margin-right: 3px;
}

#result-screen .c-green {
  color: var(--color-green);
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8);
}

#result-screen .c-red {
  color: #ff4757;
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8);
}

#result-screen .c-blue {
  color: #3742fa;
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8);
}

#result-screen .c-cyan {
  color: #12f3bf;
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8);
}

/* å³å´ã®æ•°å€¤ã‚’ç¸¦ç©ã¿ã«ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ */
.stat-right-stacked {
  display: flex;
  flex-direction: column; /* ç¸¦ä¸¦ã³ã«ã™ã‚‹ */
  align-items: flex-end; /* å³å¯„ã› */
}

/* wordsæ•°ï¼ˆæ•°å€¤ã®ä¸Šã«è¡¨ç¤ºã™ã‚‹å°ã•ã„æ–‡å­—ï¼‰ */
.sub-val-upper {
  font-weight: bold;
  font-size: 13px;
  color: var(--color-white);
  text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
}

/* Correctã®è¡Œã ã‘å°‘ã—é«˜ã•ã‚’ç¢ºä¿ã—ã¦ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ */
.stat-row:first-child {
  padding-bottom: 6px;
}

/* Correctã®æ•°å€¤ã ã‘ã‚’å°‘ã—ä¸Šã«ãšã‚‰ã™ */
.stat-right-stacked .stat-val {
  /* ãƒã‚¤ãƒŠã‚¹ã®å€¤ã§ä¸Šã«ç§»å‹•ã—ã¾ã™ã€‚æ•°å€¤ã‚’èª¿æ•´ã—ã¦ãã ã•ã„ */
  transform: translateY(-6px);
}

.combo-row .c-orange {
  background: linear-gradient(45deg, #f1c40f, #e67e22);
  background-clip: text;
  font-family: var(--font-pop-fredoka);
}

.combo-row .stat-label.c-orange {
  font-size: 32px;
}

.combo-row .stat-val.c-orange {
  font-size: 60px;
  line-height: 1;
}

.rank-area {
  flex-grow: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

.rank-circle {
  width: 180px;
  height: 180px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.rank-label {
  font-family: var(--font-pop-fredoka);
  font-size: 25px;
  color: var(--color-white);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

#res-rank {
  font-family: var(--font-pop-fredoka);
  font-size: 160px;
  line-height: 0.8;

  color: var(--rank-color, var(--color-white)); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç™½ */
  text-shadow: var(--rank-shadow, none);

  /* Sã¨Aã ã‘ã‚¢ãƒ‹ãƒ¡ãŒã‚ã‚‹å ´åˆã€å¤‰æ•°ãŒãªã‘ã‚Œã° 'none' ã«ãªã‚‹ */
  animation: var(--rank-anim, none);
}

/* --- S RANK (Special Luxury) --- */
.res-rank-s {
  --rank-color: var(--color-lightyellow);

  /* è¤‡é›‘ãªå½±ã‚‚ã€ä¸€ã¤ã®å¤‰æ•°ã«å…¥ã‚Œã¦ã—ã¾ãˆã°OK */
  --rank-shadow:
    3px 3px 0 var(--color-darkorange), -2px -2px 0 var(--color-white),
    0 0 30px var(--color-gold), 0 0 60px var(--color-orange);

  /* è¤‡é›‘ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å¤‰æ•°ã¸ */
  --rank-anim:
    rank-impact-ultra 1.3s cubic-bezier(0.19, 1, 0.22, 1) forwards,
    aura-pulse-mega 2s infinite 1.3s;
}

/* --- A RANK (Burning) --- */
.res-rank-a {
  --rank-color: rgb(236, 59, 59);

  --rank-shadow: 2px 2px 0 #8b0000, 0 0 30px #ff4500, 0 0 60px var(--color-red);

  --rank-anim:
    rank-impact-mega 0.8s cubic-bezier(0.19, 1, 0.22, 1) forwards,
    aura-burning 1.5s infinite 0.8s;
}

/* --- B RANK (Simple) --- */
.res-rank-b {
  --rank-color: var(--color-oceanblue);

  --rank-shadow: 2px 2px 0 #074587, 0 0 20px #90eff1, 0 0 40px #3680e0;

  /* ã‚¢ãƒ‹ãƒ¡å®šç¾©ãªã— â†’ è‡ªå‹•çš„ã« none ã«ãªã‚‹ã®ã§è¨˜è¿°ä¸è¦ï¼ */
}

/* --- C & D RANK --- */
.res-rank-c {
  --rank-color: rgb(42, 185, 54);
  --rank-shadow: 2px 2px 0 #c7edb8, 0 0 10px #dcf5c1, 0 0 20px #26d557;
}

.res-rank-d {
  --rank-color: var(--color-black);
  --rank-shadow:
    2px 2px 0 var(--color-black), 0 0 5px var(--color-gray),
    0 0 10px var(--color-black);
}

@keyframes rank-impact-ultra {
  0% {
    transform: scale(5) rotate(-5deg);
    opacity: 0;
    filter: blur(10px);
  }
  40% {
    transform: scale(0.8) rotate(2deg);
    opacity: 1;
    filter: blur(0px);
  }
  60% {
    transform: scale(1.1) rotate(-1deg);
  }
  80% {
    transform: scale(0.95) rotate(0.5deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}

@keyframes aura-pulse-mega {
  0%,
  100% {
    text-shadow:
      3px 3px 0 #b8860b,
      0 0 30px var(--color-gold),
      0 0 60px var(--color-orange);
    filter: brightness(1);
  }
  50% {
    text-shadow:
      3px 3px 0 #b8860b,
      0 0 70px var(--color-gold),
      0 0 90px #ffcc00,
      0 0 120px var(--color-white);
    filter: brightness(1.3);
  }
}

@keyframes rank-impact-mega {
  0% {
    transform: scale(3);
    opacity: 0;
  }
  50% {
    transform: scale(0.9);
    opacity: 1;
  }
  75% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

/* =========================================
   è‹¦æ‰‹ã‚¨ãƒªã‚¢ (POP & ã™ã‚Šã‚¬ãƒ©ã‚¹ & ã‚´ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«)
   ========================================= */
.result-box.weak-box {
  background: rgba(218, 212, 228, 0.4); /* æ˜ã‚‹ã„åŠé€æ˜ */
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 20px;
  box-shadow: inset 0 0 20px rgba(235, 235, 255, 0.2); /* å†…å´ã®å…‰æ²¢ */
  padding: 10px 15px;
  /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¶­æŒ */
  display: flex;
  flex-direction: column;
  max-height: 140px;
  overflow: hidden;
}

/* ãƒ©ãƒ™ãƒ« (è‹¦æ‰‹ãªå˜èª/ã‚­ãƒ¼) */
.label-small {
  font-family: "M PLUS Rounded 1c", sans-serif !important;
  font-weight: 500;
  font-size: 0.7rem;
  color: #fff;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);

  background: var(--color-orange); /* ã‚ªãƒ¬ãƒ³ã‚¸èƒŒæ™¯ */
  padding: 4px 12px;
  border-radius: 10px;
  border: 2px solid #fff;

  margin-bottom: 5px;
  display: inline-block;
  width: fit-content;
  box-shadow: 0 4px 0 rgba(0, 0, 0, 0.1);
}

/* ãƒªã‚¹ãƒˆéƒ¨åˆ†ï¼ˆæ–‡å­—è‰²ãªã©ã®èª¿æ•´ï¼‰ */
.weak-list {
  font-weight: bold;
  color: var(--color-milkywhite);
  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
  overflow-y: auto;
  flex-grow: 1;
  padding-right: 5px;
}

/* åŒºåˆ‡ã‚Šç·š */
.weak-list li {
  border-bottom: 1px dashed rgba(255, 255, 255, 0.4);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* å˜èªçœç•¥è¨­å®š */
.weak-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 65%;
  text-align: left;
}

/* ãƒŸã‚¹å›æ•° */
.miss-count {
  font-family: var(--font-pop-fredoka);
  color: var(--color-hotpink);
  text-shadow: 1px 1px 0 var(--color-white);
  font-size: 17px;
}

.scroll-gold::-webkit-scrollbar {
  width: 12px;
}

/* è»Œé“ */
.scroll-gold::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 10px;
  margin: 5px 0;
}

/* ã¤ã¾ã¿ (å¤‰æ•°åŒ–ï¼) */
.scroll-gold::-webkit-scrollbar-thumb {
  /* è‰²ã‚’å¤‰æ•°ã«ã—ã¦ãŠã‘ã°ã€å¾Œã§ã€Œã‚‚ã£ã¨è¼ã‹ã›ãŸã„ã€æ™‚ã«ä¸€ç®‡æ‰€å¤‰ãˆã‚‹ã ã‘ã§æ¸ˆã‚€ */
  background: linear-gradient(
    180deg,
    var(--color-gold, #ffd700) 0%,
    /* æœªå®šç¾©ãªã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰² */ var(--color-orange, #ffaa00) 100%
  );
  border-radius: 10px;
  border: 2px solid rgba(255, 255, 255, 0.5);
  background-clip: padding-box;
}

/* ãƒ›ãƒãƒ¼æ™‚ */
.scroll-gold::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    180deg,
    var(--color-lightyellow, #ffffaa) 0%,
    var(--color-gold, #ffcc00) 100%
  );
  border: 2px solid rgba(255, 255, 255, 0.8);
  background-clip: padding-box;
}

/* --- 2. ãƒªã‚¶ãƒ«ãƒˆãƒ•ãƒƒã‚¿ãƒ¼ (ãƒœã‚¿ãƒ³ & ã‚¢ã‚¤ã‚³ãƒ³) --- */
.result-footer-area {
  width: 100%;
  height: 85px;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ä¸­å¤®ã®ãƒœã‚¿ãƒ³ç¾¤ */
.result-buttons {
  display: flex;
  gap: 15px;
}

.res-btn {
  /* --- å…±é€šè¨­å®š --- */
  appearance: none;
  outline: none;
  border-radius: 50px;
  cursor: pointer;
  font-family: var(--font-pop-fredoka);
  font-size: 1.3rem;
  padding: 12px 30px;
  letter-spacing: 1px;
  transition:
    transform 0.1s ease,
    box-shadow 0.1s ease;

  background: var(--btn-bg); /* èƒŒæ™¯è‰² */
  color: var(--btn-text); /* æ–‡å­—è‰² */
  border: 3px solid var(--btn-border); /* æ ç·š */

  /* å½±ã®è‰²ã‚‚å¤‰æ•°åŒ– */
  box-shadow:
    0 6px 0 var(--btn-shadow-color),
    0 10px 10px rgba(0, 0, 0, 0.3);
}

/* --- å‹•ãï¼ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã¯ã“ã“ã§çµ±ä¸€ï¼ --- */
.res-btn:hover {
  color: var(--btn-hover-text);
  background: var(--btn-bg-hover); /* ãƒ›ãƒãƒ¼æ™‚ã®è‰² */
  transform: translateY(-2px);

  box-shadow:
    0 8px 0 var(--btn-shadow-color),
    0 15px 20px rgba(0, 0, 0, 0.2);
}

.res-btn:active {
  transform: translateY(4px);
  /* å½±ãŒæ¸›ã‚‹æ¼”å‡ºã‚‚ã€å¤‰æ•°ã‚’ä½¿ã„å›ã™ã®ã§è¨˜è¿°ã¯1å›ã§OK */
  box-shadow: 0 2px 0 var(--btn-shadow-color);
}

/* --- Primary (èµ¤) --- */
.res-btn.primary {
  --btn-bg: #ff4757;
  --btn-bg-hover: var(--color-redpink);
  --btn-text: var(--color-white);
  --btn-border: var(--color-white);
  --btn-shadow-color: var(--color-shadow-hotred);
}

/* --- Secondary (ç™½) --- */
.res-btn.secondary {
  --btn-bg: var(--color-white);
  --btn-bg-hover: var(--color-milkywhite);
  --btn-text: var(--color-gray);
  --btn-hover-text: var(--color-orange);
  --btn-border: var(--color-milkywhite);
  --btn-shadow-color: var(--color-offwhite);
}

/* å³ç«¯ã®ã‚·ã‚§ã‚¢ã‚¢ã‚¤ã‚³ãƒ³ç¾¤ */
.result-share-group {
  position: absolute;
  right: 10px;
  display: flex;
  gap: 10px;
  pointer-events: auto;
}

#result-screen .share-icon-box {
  /* =========================================
     1. ã€ææ–™ã‚³ãƒ¼ãƒŠãƒ¼ã€‘ ã“ã“ã§æ•°å€¤ã‚’å…¨éƒ¨ç®¡ç†ï¼
     ========================================= */

  /* ã‚µã‚¤ã‚º */
  --icon-size: 50px;
  --icon-radius: 12px;

  /* è‰²ï¼ˆèƒŒæ™¯ãƒ»æ ç·šï¼‰ */
  --icon-bg-default: rgba(255, 255, 255, 0.25);
  --icon-bg-hover: rgba(255, 255, 255, 0.6);
  --icon-bg-active: rgba(255, 255, 255, 0.4);

  --icon-border-color: rgba(255, 255, 255, 0.6);
  --icon-border-width: 2px;

  /* å½±ï¼ˆShadowï¼‰ */
  --icon-shadow-default: 0 4px 8px rgba(0, 0, 0, 0.2);
  --icon-shadow-hover: 0 8px 15px rgba(0, 0, 0, 0.3);
  --icon-shadow-active: 0 2px 3px rgba(0, 0, 0, 0.1);

  /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦ */
  --icon-transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);

  /* =========================================
     2. ã€èª¿ç†ã‚³ãƒ¼ãƒŠãƒ¼ã€‘ å¤‰æ•°(var)ã‚’ã¯ã‚è¾¼ã‚€ã ã‘
     ========================================= */

  width: var(--icon-size);
  height: var(--icon-size); /* æ­£æ–¹å½¢ãªã‚‰åŒã˜å¤‰æ•°ã‚’ä½¿ãˆã°ã„ã„ï¼ */

  display: flex;
  justify-content: center;
  align-items: center;

  background: var(--icon-bg-default);
  border: var(--icon-border-width) solid var(--icon-border-color);
  border-radius: var(--icon-radius);

  box-shadow: var(--icon-shadow-default);
  backdrop-filter: blur(4px);

  transition: var(--icon-transition);

  cursor: pointer;
  pointer-events: auto;
  position: relative;
}

/* --- ãƒ›ãƒãƒ¼æ™‚ --- */
#result-screen .share-icon-box:hover {
  transform: translateY(-5px) scale(1.1);

  /* è‰²ã‚’å¤‰ãˆã‚‹ã ã‘ï¼ */
  background: var(--icon-bg-hover);
  border-color: var(--color-white); /* â€»ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ãŒã‚ã‚‹æƒ³å®š */
  box-shadow: var(--icon-shadow-hover);
}

/* --- ã‚¯ãƒªãƒƒã‚¯æ™‚ --- */
#result-screen .share-icon-box:active {
  transform: translateY(2px) scale(0.95);

  background: var(--icon-bg-active);
  box-shadow: var(--icon-shadow-active);

  transition: transform 0.05s ease;
}

#result-screen .share-icon-box img {
  width: 32px;
  height: 32px;
  object-fit: contain;
  pointer-events: none;
  filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.2));
  transition: transform 0.2s ease;
}

#result-screen .share-icon-box:hover img {
  transform: scale(1.1);
}

/* NEW RECORD ãƒãƒƒã‚¸ */
#new-record-badge {
  position: absolute;
  top: -10px;
  right: 23px;
  white-space: nowrap;
  background: linear-gradient(
    40deg,
    #ff8080,
    #ffc489,
    #ffff9b,
    #a3ffa3,
    #8282ff,
    #dfb3ff,
    #d87eff
  );
  background-size: 300% 300%;
  color: var(--color-white);
  font-family: var(--font-pop-fredoka);
  font-size: 0.6rem;
  padding: 2px 16px;
  border-radius: 40px;
  border: 2px solid;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  animation:
    rainbowAnim 3s ease infinite,
    floatUp 0.7s ease-out forwards;
  opacity: 0;
}

#new-record-badge.hidden {
  display: none;
}

@keyframes rainbowAnim {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@keyframes floatUp {
  0% {
    transform: translateY(10px) scale(0.8);
    opacity: 0;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã‚¯ãƒ©ã‚¹ */
.fade-target {
  opacity: 0;
  transform: translateY(20px);
  transition:
    opacity 0.5s ease-out,
    transform 0.5s ease-out;
  visibility: hidden;
}

.fade-target.visible {
  opacity: 1;
  transform: translateY(0);
  visibility: visible;
}

/* è¨­å®šç”»é¢ (CONFIG MODAL) */
.config-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--config-bg);
  z-index: var(--z-config);
  display: grid;
  place-items: center;
  animation: fadeIn 0.3s ease-out;

  /* â–¼ å­è¦ç´  (.config-modal) ã‚’ã“ã“ã«ãƒã‚¹ãƒˆï¼ */
  & .config-modal {
    margin: auto;

    /* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚º */
    width: 70%;
    height: 90%;
    padding: 8cqh 8cqw;

    container-type: size;

    background: linear-gradient(160deg, #4535b2 0%, #ae4868 100%);
    border-radius: 30px;
    box-shadow:
      0 1cqh 3cqh rgba(0, 0, 0, 0.5),
      0 0 0 0.4cqh inset rgba(255, 247, 217, 0.9),
      0 0 4cqh inset rgba(255, 196, 125, 0.9);

    box-sizing: border-box;
    text-align: center;
    color: var(--color-white);

    overflow: hidden;
    display: flex; /* å­è¦ç´ ã‚’åºƒã’ã‚‹ãŸã‚ã«flexæ¨å¥¨ */
    flex-direction: column;

    /* 3. ã‚¿ã‚¤ãƒˆãƒ« (SETTING) */
    & .config-title {
      font-size: 7cqh;
      font-weight: 800;
      color: var(--color-white);
      flex-shrink: 0;

      text-shadow:
        0.3cqh 0.3cqh 0px var(--color-hotpink),
        0.5cqh 0.5cqh 0px rgba(0, 0, 0, 0.2);

      border-bottom: 0.4cqh dashed rgba(255, 255, 255, 0.5);
      line-height: 1;
      letter-spacing: 0.1em;
    }

    /* 7. é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */
    .config-buttons {
      margin-top: 2cqh;
      flex-shrink: 0;
      & button.pop-btn.primary {
        background: linear-gradient(
          135deg,
          hsl(42, 100%, 65%) 0%,
          #ffa442 40%,
          #d8a4ff 100%
        );
        color: #fffce0;
        font-weight: 800;
        border: none;
        cursor: pointer;

        padding: 1.5cqh 6cqh;
        border-radius: 5cqh;
        font-size: 2.8cqh;

        box-shadow: 0 0.8cqh 0 var(--color-creamorange);
        transition:
          transform 0.3s,
          box-shadow 0.3s;
      }
      &:hover {
        transform: translateY(-0.3cqh);
      }
      &:active {
        transform: translateY(-0.1cqh);
        box-shadow: 0 0 0 var(--color-creamorange);
      }
    }

    & .config-scroll-area {
      width: 100%;
      flex: 1;
      overflow-y: auto; /* ã“ã“ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ‹…å½“ */
      padding-right: 15px;

      /* Firefoxç”¨ */
      scrollbar-width: thin;
      scrollbar-color: #ffd700 rgba(0, 0, 0, 0.15);

      /* --- â–¼â–¼â–¼ ã“ã“ã‹ã‚‰ã‚´ãƒ¼ãƒ«ãƒ‰ãƒ»ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ (POPã‚¹ã‚¿ã‚¤ãƒ«) â–¼â–¼â–¼ --- */
      &::-webkit-scrollbar {
        width: var(--sb-width);
      }

      /* è»Œé“ */
      &::-webkit-scrollbar-track {
        background: var(--sb-track-color);
        border-radius: var(--sb-width);
        margin: var(--sb-width) 0;
      }

      /* ã¤ã¾ã¿ */
      &::-webkit-scrollbar-thumb {
        background: linear-gradient(
          180deg,
          var(--sb-gold-start) 0%,
          var(--sb-gold-end) 100%
        );
        border-radius: var(--sb-width);
        border: 2px solid rgba(255, 255, 255, 0.3);
        background-clip: padding-box;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      /* ãƒ›ãƒãƒ¼æ™‚ */
      &::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
          180deg,
          var(--sb-gold-hover-start) 0%,
          var(--sb-gold-hover-end) 100%
        );
      }
    }
  }
}

/* é …ç›®ã®åº§å¸ƒå›£ */
.config-item {
  text-align: left;
  background: rgba(0, 0, 0, 0.2);
  padding: 2.5cqh 3cqh;
  border-radius: 2cqh;
  /* ç„¡åŠ¹åŒ–ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼‰ */
  &.disabled {
    opacity: 0.5;
    filter: grayscale(80%);
    pointer-events: none;
  }
}

/* 5. ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å‘¨ã‚Š */
.config-label {
  /* è¨­å®šã‚¨ãƒªã‚¢ */
  --cb-size: 4.5cqh; /* ç®±ã®ã‚µã‚¤ã‚º */
  --cb-radius: 1cqh; /* è§’ä¸¸ */

  /* OFF (æœªãƒã‚§ãƒƒã‚¯) ã®æ™‚ã®è‰² */
  --cb-bg-off: #fff;
  --cb-border-off: #ffecd2;

  /* ON (ãƒã‚§ãƒƒã‚¯æ¸ˆã¿) ã®æ™‚ã®è‰² */
  --cb-bg-on: #ff9a9e; /* ãƒ”ãƒ³ã‚¯ */
  --cb-border-on: #fff; /* æ ç·šã¯ç™½ã« */
  --cb-tick-color: #fff; /* ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®è‰² */

  display: flex;
  align-items: center;
  gap: 1cqh;
  cursor: pointer;
  font-size: 3.2cqh;
  color: #fff;
  font-weight: 700;

  /* â–¼ inputè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  & input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;

    /* å¤‰æ•°ã‚’é©ç”¨ï¼ */
    width: var(--cb-size);
    height: var(--cb-size);
    border-radius: var(--cb-radius);
    background: var(--cb-bg-off);
    border: 0.3cqh solid var(--cb-border-off);

    margin-right: 2.5cqh;
    cursor: pointer;
    position: relative;
    transition: all 0.2s cubic-bezier(0.6, 0, 0.2, 1);

    &:active {
      transform: scale(0.9);
    }

    /* 1. ãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸçŠ¶æ…‹ (:checked) */
    &:checked {
      background: var(--cb-bg-on);
      border-color: var(--cb-border-on);

      /* 2. ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ (::after) */
      &::after {
        content: "âœ”";
        position: absolute;

        color: var(--cb-tick-color);
        font-size: calc(
          var(--cb-size) * 0.8
        ); /* ç®±ã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦è‡ªå‹•èª¿æ•´ */

        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    }
  }
}

/* 6. ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼å‘¨ã‚Š */
.slider-label-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 2cqh;
  font-size: 2.8cqh;
  color: var(--color-lightyellow);
  font-weight: bold;
}

/* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼æœ¬ä½“ */
.volume-slider {
  /* è¨­å®šã‚¨ãƒªã‚¢ */
  --sd-size: 4cqh;
  --sd-bg: #fbc2eb;
  --sd-border: 0.4cqh solid var(--color-white);
  --sd-shadow: 0 0.3cqh 0.6cqh rgba(0, 0, 0, 0.3);

  outline: none;
  appearance: none;
  -webkit-appearance: none;

  width: 100%;
  height: 1.8cqh;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 1cqh;
  box-shadow: inset 0 0.3cqh 0.6cqh rgba(0, 0, 0, 0.2);
  cursor: pointer;

  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;

    width: var(--sd-size);
    height: var(--sd-size);
    background: var(--sd-bg);

    /* å¤‰æ•°åŒ–ã—ãŸãƒœãƒ¼ãƒ€ãƒ¼ã‚’é©ç”¨ */
    border: var(--sd-border);
    border-radius: 50%;

    box-shadow: var(--sd-shadow);
    transition: transform 0.1s ease;
  }

  /* ãƒ›ãƒãƒ¼æ™‚ */
  &::-webkit-slider-thumb:hover {
    transform: scale(1.2);
  }

  /* â–¼ Firefoxç”¨ */
  &::-moz-range-thumb {
    width: var(--sd-size);
    height: var(--sd-size);
    background: var(--sd-bg);

    border: var(--sd-border);
    border-radius: 50%;
    box-shadow: var(--sd-shadow);

    transition: transform 0.1s ease;
  }

  &::-moz-range-thumb:hover {
    transform: scale(1.2);
  }
}

/* é–‹ç™ºè€…ã‚¹ã‚³ã‚¢ãƒœã‚¿ãƒ³ï¼ˆç‹å† ï¼‰ã®ç‰¹åˆ¥è‰² */
.close-btn.dev-btn {
  border-color: var(--color-gold);
}

.close-btn.dev-btn:hover {
  background: var(--color-lightyellow);
}

/* åœ°çƒå„€ãƒœã‚¿ãƒ³ï¼ˆé€šå¸¸ãƒ©ãƒ³ã‚¯ã¸æˆ»ã‚‹ï¼‰ */
.close-btn.global-btn {
  border-color: var(--color-lightblue);
}

/* --- è£½ä½œè€…ã‚¹ã‚³ã‚¢POPï¼ˆç‰¹åˆ¥ã‚«ãƒ¼ãƒ‰ï¼‰ --- */
.dev-score-pop-container {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.dev-score-card {
  background: linear-gradient(
    130deg,
    hsl(234, 99%, 72%) 5%,
    #eaa7ff 70%,
    #ff8efd 100%
  );
  border: 3px solid #ffd112; /* è¦ªã®color(ãƒ†ãƒ¼ãƒè‰²)ã‚’å¼•ãç¶™ã */
  border-radius: 20px;
  padding: 25px;
  width: 90%;
  max-width: 500px;
  text-align: center;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
  position: relative;
  overflow: hidden;
  & .dev-label {
    font-size: 1.4rem;
    color: yellow;
    font-weight: bold;
    letter-spacing: 2px;
    display: inline;
    border-bottom: 1px solid currentColor;
  }

  & .dev-main-score {
    font-size: 3rem;
    font-weight: 600;
    color: var(--color-hotpink);
    letter-spacing: 1px;
    line-height: 1;
    margin: 0px 0 10px 0;
    text-shadow: 2px 2px 0px #ddd;
  }
}

/* ã‚°ãƒªãƒƒãƒ‰è‡ªä½“ã®èª¿æ•´ï¼š1åˆ—ã«ã—ã¦ç¸¦ã«ä¸¦ã¹ã‚‹ */
.dev-stats-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  background: rgba(0, 0, 0, 0.3);
  padding: 15px;
  border-radius: 15px;
  /* å„ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¸­å¤®æƒãˆã«ã—ã¦ãƒãƒƒãƒ—ãªã‚·ãƒ¼ãƒ«ã®ã‚ˆã†ã« */
  & .dev-stat-item {
    display: flex;
    flex-direction: row; /* â˜…ç¸¦ä¸¦ã³ãƒªã‚¹ãƒˆã£ã½ãã€ãƒ©ãƒ™ãƒ«ã¨æ•°å€¤ã‚’æ¨ªä¸¦ã³ã«å¤‰æ›´ */
    justify-content: space-between; /* å·¦å³ã«é…ç½® */
    align-items: center;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.2); /* åŒºåˆ‡ã‚Šç·šã‚’è¿½åŠ  */
    padding-bottom: 5px;
  }

  /* ãƒ©ãƒ™ãƒ« (Correct, Miss...) ã®å…±é€šè¨­å®š */
  & .dev-stat-item span:first-child {
    font-size: 1.4rem; /* å°‘ã—å¤§ãã */
    font-weight: 900;
    letter-spacing: 1px;
    margin-bottom: 0; /* æ¨ªä¸¦ã³ã«ã™ã‚‹ã®ã§ä¸‹ã®ä½™ç™½ã¯å‰Šé™¤ */
  }
}

/* æ•°å€¤ã®å…±é€šè¨­å®š */
.dev-stat-item .dev-stat-val {
  font-size: 2rem;
  font-weight: 900;
  line-height: 1;
}

/* 1. Correct (Green) */
.dev-stat-item:nth-child(1) span:first-child,
.dev-stat-item:nth-child(1) .dev-stat-val {
  color: #2ecc71;
  text-shadow: 1px 1px 0 #fff;
}

/* 2. Miss (Red) */
.dev-stat-item:nth-child(2) span:first-child,
.dev-stat-item:nth-child(2) .dev-stat-val {
  color: #e74c3c;
  text-shadow: 1px 1px 0 #fff;
}

/* 3. BackSpace (Blue) â˜…ã“ã“ã«è¿½åŠ  */
.dev-stat-item:nth-child(3) span:first-child,
.dev-stat-item:nth-child(3) .dev-stat-val {
  color: #3498db;
  text-shadow: 1px 1px 0 #fff;
}

/* 4. Speed (Cyan) â˜…é †ç•ªãŒ4ç•ªç›®ã« */
.dev-stat-item:nth-child(4) span:first-child,
.dev-stat-item:nth-child(4) .dev-stat-val {
  color: #00bcd4;
  text-shadow: 2px 2px 0 #fff;
}

/* Speedã®å˜ä½(key/s) */
.dev-stat-item:nth-child(4) .dev-stat-val span {
  font-size: 1rem;
  color: #00bcd4;
  text-shadow: 1px 1px 0 #fff;
  font-weight: 700;
  margin-left: 5px;
}

/* 5. MaxCombo (Orange) â˜…é †ç•ªãŒ5ç•ªç›®ã« */
.dev-stat-item:nth-child(5) span:first-child,
.dev-stat-item:nth-child(5) .dev-stat-val {
  background: linear-gradient(45deg, #f1c40f, #e67e22);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.8));
}

.dev-pop-back-btn:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

.dev-pop-back-btn:active {
  transform: translateY(1px);
  box-shadow: none !important;
  filter: brightness(0.95);
}

/* =========================================
   éŠã³æ–¹ç”»é¢ï¼šå·¦ã®ç”»åƒã‚’å®Œç’§ã«å†ç¾ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«
   ========================================= */

/* 1. ãƒ¢ãƒ¼ãƒ€ãƒ«å…¨ä½“ï¼ˆå¤–æ ï¼‰- ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”å›ºå®šã‚³ãƒ³ãƒ†ãƒŠ */
.config-modal.howto-modal {
  position: fixed;
  inset: 0;
  margin: auto;
  width: 95%;
  height: 95%;

  /* ã‚³ãƒ³ãƒ†ãƒŠã‚¯ã‚¨ãƒªè¨­å®šï¼šã“ã“ã‚’åŸºæº–ã«æ–‡å­—ã‚µã‚¤ã‚ºã‚’æ±ºã‚ã‚‹ */
  container-type: size;

  /* ãƒ‡ã‚¶ã‚¤ãƒ³ */
  background: linear-gradient(160deg, #4535b2 0%, #ae4868 100%);
  border: 0.4cqh solid #ffe0cb;
  border-radius: 2cqh;
  box-shadow: 0 0 5cqh rgba(0, 0, 0, 0.5);
  padding: 3cqh 4cqw;
  box-sizing: border-box;
  overflow: hidden;
  color: #fff;
  font-family: "M PLUS Rounded 1c", sans-serif;
  display: flex;
  flex-direction: column;
}

/* å…¨ä½“ã®æ–‡å­—ã‚µã‚¤ã‚ºåŸºæº–è¨­å®š */
.config-modal.howto-modal * {
  box-sizing: border-box;
}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.config-title {
  text-align: center;
  font-size: 5cqh;
  margin-bottom: 2cqh;
  font-weight: 800;
  text-shadow: 0.2cqh 0.2cqh 0 #ff9a9e;
  border-bottom: 0.3cqh dashed rgba(255, 255, 255, 0.5);
  padding-bottom: 1cqh;
  flex-shrink: 0;
}

/* 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.howto-grid-container {
  display: grid;
  grid-template-columns: 1.1fr 0.9fr; /* å·¦ã‚’å°‘ã—åºƒã‚ã« */
  gap: 3cqw;
  flex: 1;
  min-height: 0;
}

/* ã‚«ãƒ©ãƒ å…±é€š */
.howto-col {
  display: flex;
  flex-direction: column;
  gap: 1.5cqh;
}

/* è¦‹å‡ºã—ï¼ˆãƒ«ãƒ¼ãƒ«ã€æ“ä½œæ–¹æ³•ï¼‰ */
.howto-heading {
  font-size: 3cqh;
  font-weight: bold;
  color: #ffecd2;
  text-align: center;
  border-bottom: 0.2cqh dashed rgba(255, 255, 255, 0.4);
  padding-bottom: 0.5cqh;
  margin-bottom: 0.5cqh;
}

.howto-heading_sub {
  font-size: 2.5cqh;
  font-weight: bold;
  color: #ffecd2;
  margin-bottom: 0.5cqh;
}

/* --- å·¦å´ï¼šãƒªã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ« --- */
.howto-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 1.2cqh; /* ãƒªã‚¹ãƒˆé–“ã®éš™é–“ */
}

.howto-list li {
  font-size: 2.5cqh;
  line-height: 1.5;
  background: rgba(0, 0, 0, 0.2);
  padding: 1cqh;
  border-radius: 1cqh;
  display: flex;
  align-items: flex-start; /* ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆã®ä¸Šæƒãˆ */
  text-align: left;
}

/* ã‚¢ã‚¤ã‚³ãƒ³ */
.howto-list .icon {
  font-size: 2.5cqh;
  margin-right: 1cqh;
  flex-shrink: 0;
  width: 3cqh;
  text-align: center;
  line-height: 1;
}

/* æ³¨é‡ˆ */
.note {
  display: block;
  font-size: 2cqh;
  opacity: 0.9;
  margin-top: 0.2cqh;
  line-height: 1.2;
}

/* --- å³å´ï¼šãƒ†ã‚­ã‚¹ãƒˆã¨è¡¨ --- */
.howto-text {
  font-size: 3cqh;
  line-height: 1.6;
  text-align: center;
}

/* ãƒ­ãƒ¼ãƒå­—è¡¨ãƒœãƒƒã‚¯ã‚¹ */
.key-example-box {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 1.5cqh;
  padding: 1.5cqh 2cqh;
  border: 0.2cqh solid rgba(255, 255, 255, 0.2);
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.key-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 0.6cqh 0;
}

.key-row:last-of-type {
  border-bottom: none;
}

.key-char {
  font-size: 2.5cqh;
  font-weight: bold;
}

.key-val {
  font-size: 2.2cqh;
  font-family: monospace;
  color: #ff9a9e;
}

/* --- ãƒã‚¤ãƒ©ã‚¤ãƒˆè‰²å®šç¾©ï¼ˆç”»åƒã®é€šã‚Šã«å†ç¾ï¼‰ --- */
.highlight-gold {
  color: #ffd700;
  font-weight: bold;
  text-shadow: 0 0 0.5cqh rgba(255, 215, 0, 0.5);
}

.highlight-blue {
  color: #40c4ff;
  font-weight: bold;
  text-shadow: 0 0 0.5cqh rgba(64, 196, 255, 0.5);
}

.highlight-green {
  color: #69f0ae;
  font-weight: bold;
  text-shadow: 0 0 0.5cqh rgba(105, 240, 174, 0.5);
}

.highlight-red {
  color: #ff5252;
  font-weight: bold;
  text-shadow: 0 0 0.5cqh rgba(255, 82, 82, 0.5);
}

.red-note {
  color: #ff8a80;
}

/* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ */
.config-buttons {
  margin-top: 1.5cqh;
  text-align: center;
  flex-shrink: 0;
}

.config-buttons button.pop-btn.primary {
  font-size: 3cqh;
  padding: 2cqh 4cqh;
  border-radius: 5cqh;
  border: none;
  background: linear-gradient(
    135deg,
    hsl(42, 100%, 65%) 0%,
    #ffa442 40%,
    #d8a4ff 100%
  );
  color: #fffce0;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 0.4cqh 0.2cqh #ffc9b4;
}

/* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒãƒƒãƒ—ã« */
.pop-input-field {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid #00d2ff;
  border-radius: 50px; /* ä¸¸ãã™ã‚‹ */
  padding: 10px 20px;
  font-size: 1.2rem;
  color: #330066;
  font-weight: bold;
  text-align: center;
  outline: none;
  width: 80%;
  margin-top: 15px; /* ä¸Šã®ä½™ç™½ */
  margin-bottom: 20px; /* ä¸‹ã®ä½™ç™½ï¼ˆç‹­ã‚ã¾ã—ãŸï¼‰ */
  box-shadow: 0 4px 0 rgba(0, 210, 255, 0.5); /* ç«‹ä½“æ„Ÿ */
  transition: all 0.2s;
}

.pop-input-field:focus {
  transform: translateY(2px);
  box-shadow: 0 2px 0 rgba(0, 210, 255, 0.5);
}

/* è¨­å®šå†…ã®åå‰å¤‰æ›´ãƒœã‚¿ãƒ³ã‚‚ãƒãƒƒãƒ—ã« */
.btn-change-name {
  background: linear-gradient(to bottom, #ffeb3b, #fbc02d);
  color: #5a4a00;
  font-weight: bold;
  border: 2px solid #fff;
  border-radius: 20px;
  padding: 5px 15px;
  cursor: pointer;
  box-shadow: 0 4px 0 #f57f17;
  transition:
    transform 0.1s,
    box-shadow 0.1s;
}

.btn-change-name:active {
  transform: translateY(4px);
  box-shadow: 0 0 0 #f57f17;
}

/* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãµã‚ã£ã¨è¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.error-fade-in {
  color: #ff4444;
  font-weight: bold;
  animation: fadeInError 0.4s ease forwards;
}

@keyframes fadeInError {
  from {
    opacity: 0;
    transform: translateY(-5px); /* å°‘ã—ä¸Šã‹ã‚‰é™ã‚Šã¦ãã‚‹æ„Ÿã˜ */
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ã‚¨ãƒ©ãƒ¼æ™‚ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æºã‚Œï¼ˆä»»æ„ï¼‰ */
.input-error-shake {
  animation: shake 0.3s;
  border-color: #ff4444 !important; /* å¼·åˆ¶çš„ã«èµ¤æ  */
  background: rgba(50, 0, 0, 0.3) !important; /* è–„ã„èµ¤èƒŒæ™¯ */
  box-shadow: 0 0 10px rgba(255, 68, 68, 0.4) !important;
}

@keyframes shake {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  50% {
    transform: translateX(5px);
  }
  75% {
    transform: translateX(-5px);
  }
  100% {
    transform: translateX(0);
  }
}

/* --- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«å…¨ä½“ --- */
.ranking-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(
    255,
    255,
    255,
    0.8
  ); /* èƒŒæ™¯ã‚’å°‘ã—æš—ãã—ã¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’ç›®ç«‹ãŸã›ã‚‹ */
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  animation: fadeIn 0.3s forwards;
  font-family:
    "Arial Rounded MT Bold", "M PLUS Rounded 1c", "Varela Round", sans-serif;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ãƒ¢ãƒ¼ãƒ€ãƒ«æœ¬ä½“ï¼ˆã•ã‚‰ã«å¤§ããï¼ï¼‰ */
.ranking-modal {
  width: 90%; /* ã»ã¼ç”»é¢ã„ã£ã±ã„ */
  height: 90%;
  max-width: 1200px;
  /* èƒŒæ™¯è‰²ã¯é›£æ˜“åº¦ã‚¯ãƒ©ã‚¹ã§æŒ‡å®šã™ã‚‹ãŸã‚å‰Šé™¤ */
  backdrop-filter: blur(15px); /* ã™ã‚Šã‚¬ãƒ©ã‚¹ã‚’å¼·ã */
  border-radius: 25px;
  display: flex;
  flex-direction: column;
  padding: 25px 35px;
  position: relative;
  transition: all 0.3s ease;
}

/* --- é›£æ˜“åº¦åˆ¥ãƒ†ãƒ¼ãƒ --- */

/* EASY: ã•ã‚ã‚„ã‹ãªæµ·ã®æµ·å²¸ï¼ˆã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ã‚°ãƒªãƒ¼ãƒ³ã€œé’ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ */
.ranking-modal.rank-theme-easy {
  background: linear-gradient(
    150deg,
    rgba(122, 228, 255, 0.9) 0%,
    rgba(149, 213, 255, 0.7) 45%,
    rgba(184, 255, 255, 0.4) 100%
  );
  border: 4px solid rgba(255, 255, 255, 0.8); /* ç™½ã„æ³¢ã®ã‚ˆã†ãªæ ç·š */
  box-shadow: 0 0 30px rgba(0, 200, 255, 0.4);
}

/* NORMAL: å¤•ç„¼ã‘ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ã€œç´«ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ */
.ranking-modal.rank-theme-normal {
  background: linear-gradient(
    85deg,
    rgba(255, 102, 26, 0.9) 0%,
    rgba(255, 223, 150, 0.9) 100%
  );
  border: 4px solid rgba(255, 200, 180, 0.8); /* å¤•æ—¥ã®å…‰ã®ã‚ˆã†ãªæ ç·š */
  box-shadow: 0 0 30px rgba(255, 100, 100, 0.5);
}

/* HARD: ä¸ƒå¤•ã®æ˜Ÿç©ºï¼ˆæ·±ã„ç¾¤é’è‰²ã€œå¤œç©ºã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ + é‡‘è‰²ã®æ ï¼‰ */
.ranking-modal.rank-theme-hard {
  background: linear-gradient(
    to bottom,
    rgba(15, 32, 39, 0.95) 0%,
    rgba(32, 58, 67, 0.95) 50%,
    rgba(44, 83, 100, 0.9) 100%
  );
  border: 4px solid rgba(255, 215, 0, 0.7); /* æ˜Ÿã‚„çŸ­å†Šã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ãŸé‡‘è‰²ã®æ  */
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.3); /* ã»ã‚“ã®ã‚Šé‡‘è‰²ã®å…‰ */
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.ranking-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  border-bottom: 3px dashed rgba(255, 255, 255, 0.3);
  padding-bottom: 10px;
}

.ranking-title {
  font-size: 4rem; /* ã‚¿ã‚¤ãƒˆãƒ«ã•ã‚‰ã«å¤§ãã */
  font-weight: bold;
  color: #fff; /* èƒŒæ™¯ãŒæ¿ƒã„ã®ã§ç™½æ–‡å­— */
  text-shadow: 3px 3px 0px rgba(0, 0, 0, 0.2);
  margin: 0;
  letter-spacing: 7px;
  text-transform: uppercase;
}

/* ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢ */
.ranking-list {
  flex: 1;
  overflow-y: auto;
  padding: 20px 25px;
}

.ranking-list::-webkit-scrollbar {
  width: 12px;
}

.ranking-list::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 6px;
}

.ranking-list::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.5);
  border-radius: 6px;
  border: 2px solid transparent;
  background-clip: content-box;
}

/* --- ã‚«ãƒ¼ãƒ‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
.ranking-card {
  display: flex;
  background: rgba(255, 255, 255, 0.9); /* ã‚«ãƒ¼ãƒ‰ã¯ç™½ãæ˜ã‚‹ã */
  margin-bottom: 15px;
  padding: 10px 23px;
  border-radius: 40px;
  align-items: center;
  border: 2px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.1s;
}

/* é †ä½ãƒãƒƒã‚¸ */
.rank-badge {
  width: 90px;
  text-align: center;
  margin-right: 25px;
}

.rank-num {
  font-size: 3.2rem;
  line-height: 1;
  font-weight: 800;
  text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
}

/* 1ä½ã€œ3ä½ */
.rank-1 .rank-num {
  color: #ffd700;
  text-shadow: 3px 3px 0 #d4d9a3;
  font-size: 4.5rem;
}

.rank-2 .rank-num {
  color: #c0c0c0;
  text-shadow: 3px 3px 0 #a5a39f;
  font-size: 4rem;
}

.rank-3 .rank-num {
  color: #cd7f32;
  text-shadow: 3px 3px 0 #dbb5a7;
  font-size: 3.5rem;
}

/* â˜… 4ä½ä»¥é™ï¼šæ–œã‚ã«è–„ãã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ â˜… */
.ranking-card:not(.rank-1):not(.rank-2):not(.rank-3) .rank-num {
  background: linear-gradient(
    135deg,
    #ff5277 0%,
    #ffc4cb 70%,
    rgba(255, 255, 255, 0.5) 100%
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent; /* æ–‡å­—è‰²ã‚’é€æ˜ã«ã—ã¦èƒŒæ™¯ã®ã‚°ãƒ©ãƒ‡ã‚’è¦‹ã›ã‚‹ */
  text-shadow: none; /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã›ã‚‹ãŸã‚å½±ã¯æ¶ˆã™ã‹è–„ã */
  opacity: 0.9;
}

/* =========================================
   é †ä½ã®è£…é£¾ (é™çš„ã‚­ãƒ©ã‚­ãƒ©ãƒ»èª¿æ•´ç‰ˆ)
   ========================================= */

/* å…±é€šè¨­å®š */
.rank-1 .rank-num,
.rank-2 .rank-num,
.rank-3 .rank-num {
  position: relative;
  display: inline-block;
  overflow: visible;
}

/* ----------------------------------
   1ä½: 2ä½ã®è£…é£¾ã‚’ãƒ™ãƒ¼ã‚¹ã«å°‘ã—å¢—ã‚„ã—ã¦è±ªè¯ã« (ã‚´ãƒ¼ãƒ«ãƒ‰)
   ---------------------------------- */
.rank-1 .rank-num::before {
  content: " .âœ§*âŸ¡Â·."; /* å…ƒã®2ä½ã®è¨˜å·ã‚’å°‘ã—å¢—ã‚„ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ */
  position: absolute;
  top: -22px; /* ä½ç½®èª¿æ•´ */
  left: -21px; /* ä½ç½®èª¿æ•´ */
  font-size: 1.8rem;
  color: #ffd700; /* ã‚´ãƒ¼ãƒ«ãƒ‰ */
  text-shadow: 0 0 5px rgba(255, 215, 0, 0.6); /* å¼·ã„ç™ºå…‰ */
  font-family: "Arial", sans-serif;
  white-space: nowrap;
}

.rank-1 .rank-num::after {
  content: "*âœ§Ë–.âŸ¡âœ§*"; /* ä¸‹å´ã‚‚åŒæ§˜ã«å°‘ã—å¢—ã‚„ã™ */
  position: absolute;
  bottom: -22px; /* ä½ç½®èª¿æ•´ */
  right: -35px; /* ä½ç½®èª¿æ•´ */
  font-size: 1.6rem;
  color: #ffd700;
  text-shadow: 0 0 5px rgba(255, 215, 0, 0.6);
  font-family: "Arial", sans-serif;
  white-space: nowrap;
}

/* ----------------------------------
   2ä½: ã¡ã‚‡ã„æ§ãˆã‚ã«ã‚­ãƒ©ã‚­ãƒ© (ã•ã£ãã®1ä½ã«è¿‘ã„è±ªè¯ã•)
   ---------------------------------- */
.rank-2 .rank-num::before {
  content: ".âŸ¡*ãƒ»";
  position: absolute;
  top: -10px;
  left: -13px;
  font-size: 1.2rem;
  color: #c0c0c0; /* ã‚·ãƒ«ãƒãƒ¼ */
}

.rank-2 .rank-num::after {
  content: "Â·.âŸ¡*";
  position: absolute;
  bottom: -10px;
  right: -15px;
  font-size: 1.2rem;
  color: #c0c0c0;
}

/* ----------------------------------
   3ä½: ã„ã¾ã®2ä½ã¿ãŸã„ãªæ„Ÿã˜ (ã‚·ãƒ³ãƒ—ãƒ«ã«)
   ---------------------------------- */
.rank-3 .rank-num::before {
  content: ".*";
  position: absolute;
  top: -5px;
  left: -10px;
  font-size: 1rem;
  color: #cd7f32; /* ãƒ–ãƒ­ãƒ³ã‚º */
}

.rank-3 .rank-num::after {
  content: ".*";
  position: absolute;
  bottom: 0px;
  right: -10px;
  font-size: 1rem;
  color: #cd7f32;
}

/* 4ä½ä»¥ä¸‹ã¯è£…é£¾ãªã— */

/* æƒ…å ±ã‚¨ãƒªã‚¢ */
.rank-info {
  flex: 1;
}

.rank-name-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}

.rank-name {
  font-size: 1.6rem;
  font-weight: 800;
  color: #444;
}

.rank-date {
  font-size: 1rem;
  color: #888;
  font-weight: bold;
}

/* ã‚¹ã‚³ã‚¢ */
.rank-score {
  font-size: 3.2rem;
  font-weight: 900;
  color: #f5a6ea;
  letter-spacing: 1px;
  line-height: 1;
  margin: 0px 0 10px 0;
  text-shadow: 2px 2px 0px #ddd;
}

/* è©³ç´°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.rank-stats-grid {
  display: flex;
  gap: 15px;
  font-size: 0.95rem;
  font-weight: 800;
  background: rgba(0, 0, 0, 0.03);
  padding: 10px 15px;
  border-radius: 12px;
  flex-wrap: wrap;
}

.stat-box {
  white-space: nowrap;
}

/* è‰²ã‚¯ãƒ©ã‚¹ */
.c-green {
  color: #2ecc71;
  text-shadow: 1px 1px 0 #fff;
}

.c-red {
  color: #e74c3c;
  text-shadow: 1px 1px 0 #fff;
}

.c-blue {
  color: #3498db;
  text-shadow: 1px 1px 0 #fff;
}

.c-cyan {
  color: #00bcd4;
  text-shadow: 1px 1px 0 #fff;
}

.c-orange {
  background: linear-gradient(45deg, #f1c40f, #e67e22);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.8));
}

/* è‡ªåˆ†ã®ã‚«ãƒ¼ãƒ‰ã ã‘èƒŒæ™¯è‰²ã‚’å¤‰ãˆã‚‹ */
.ranking-card.my-rank {
  background: #fff9c4 !important; /* è–„ã„é»„è‰²ã§å¼·èª¿ */
  border: 4px solid rgb(255, 200, 0) !important; /* æ ç·šã‚’ã‚´ãƒ¼ãƒ«ãƒ‰ã« */
  transform: scale(1.02); /* ã»ã‚“ã®å°‘ã—å¤§ããã—ã¦ç›®ç«‹ãŸã›ã‚‹ */
  box-shadow: 0 8px 15px rgba(255, 202, 40, 0.4);
  position: relative !important; /* ãƒãƒƒã‚¸ã®ä½ç½®åŸºæº– */
  z-index: 5; /* ä»–ã‚ˆã‚Šæ‰‹å‰ã«è¡¨ç¤º */
}

/* ã€ŒYOUã€ãƒãƒƒã‚¸ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
.you-badge {
  position: absolute;
  top: -18px;
  left: 5px;
  background: linear-gradient(
    130deg,
    hsl(234, 100%, 82%) 5%,
    #e7a0fd 70%,
    #ffa8fe 100%
  );
  color: #fff;
  font-family: "Arial Rounded MT Bold", sans-serif;
  font-weight: 800;
  font-size: 1.1rem;
  padding: 2px 20px;
  border-radius: 20px;
  border: 3px solid #fff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
  z-index: 10;
  animation: popBadge 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* ãƒãƒƒã‚¸ãŒå‡ºã‚‹æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes popBadge {
  0% {
    transform: scale(0);
  }
  100% {
    transform: scale(1);
  }
}

/* --- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»é¢ã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒœã‚¿ãƒ³ä¿®æ­£ --- */

/* ãƒ˜ãƒƒãƒ€ãƒ¼å†…ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒœã‚¿ãƒ³ç¾¤ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ */
.ranking-header {
  display: flex;
  justify-content: space-between; /* ã‚¿ã‚¤ãƒˆãƒ«å·¦ã€ãƒœã‚¿ãƒ³å³ */
  align-items: center;
  padding: 10px 20px;
  width: 100%;
}

/* ãƒœã‚¿ãƒ³ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ */
.ranking-header-buttons {
  display: flex;
  gap: 15px; /* ãƒœã‚¿ãƒ³åŒå£«ã®é–“éš” */
  align-items: center;
}

/* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ (é ‚ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’é©ç”¨) */
.close-btn {
  width: 50px; /* å°‘ã—ã‚µã‚¤ã‚ºèª¿æ•´ï¼ˆç”»é¢ã‹ã‚‰ã¯ã¿å‡ºãªã„ã‚ˆã†ã«ï¼‰ */
  height: 50px;
  background: #fff;
  border-radius: 50%;

  font-size: 2rem; /* çµµæ–‡å­—ã‚µã‚¤ã‚º */
  font-weight: bold;
  color: #d6d6d6;

  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  box-shadow: 0 4px 0 #ddd;
  transition:
    transform 0.1s,
    box-shadow 0.1s;
  border: 2px solid #eee; /* è–„ã„æ ç·šã‚’è¿½åŠ  */
  padding-bottom: 4px; /* çµµæ–‡å­—ã®å¾®èª¿æ•´ */
}

.close-btn:hover {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #ddd;
  background: #f9f9f9;
  border-color: #e0e0e0;
}

.close-btn:active {
  transform: translateY(4px);
  box-shadow: none;
}

/* =========================================
   â™¿ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼šè¦–å·®åŠ¹æœã‚’æ¸›ã‚‰ã™è¨­å®š
   ========================================= */
@media (prefers-reduced-motion: reduce) {
  /* --------------------------------------
     1. ã€åŸºæœ¬ã€‘ ãƒ­ã‚¸ãƒƒã‚¯ä¿è­·ã®ãŸã‚ã®è¶…é«˜é€ŸåŒ–
     -------------------------------------- */
  /* åŸºæœ¬çš„ã«ã™ã¹ã¦ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¸€ç¬ã§çµ‚ã‚ã‚‰ã›ã‚‹ */
  *,
  ::before,
  ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* --------------------------------------
     2. ã€åœæ­¢ã€‘ ç”»é¢é…”ã„ã®åŸå› ã«ãªã‚‹ã€Œç„¡é™ãƒ«ãƒ¼ãƒ—ã€
     -------------------------------------- */
  /* ãƒã‚³ãƒŸãƒŸã€ã‚¿ã‚¤ãƒˆãƒ«ã€è‚‰çƒã€è™¹è‰²èƒŒæ™¯ãªã©ã¯å®Œå…¨ã«æ­¢ã‚ã‚‹ */
  .key.cat,
  .game-title.bouncing,
  .paw,
  .rainbow-glow::after,
  #tmr-text.timer-pinch,
  .blink-guide {
    animation: none !important;
    transform: none !important;
  }

  /* --------------------------------------
     3. ã€ä¿è­·ã€‘ ã‚²ãƒ¼ãƒ ã®æ‰‹å¿œãˆï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
     -------------------------------------- */
  /* ã“ã“ãŒé‡è¦ï¼ä¸€ç¬ã§æ¶ˆãˆã‚‹ã¨ã€Œæ‰“ã¦ãŸã‹ã€åˆ†ã‹ã‚‰ãªã„ã®ã§ã€
     ã€Œå‹•ãã€ã¯æ¶ˆã™ã‘ã©ã€Œè¡¨ç¤ºæ™‚é–“ã€ã¨ã€Œãƒ•ã‚§ãƒ¼ãƒ‰ã€ã¯æ®‹ã™ */

  .score-popup-item, 
  .bonus-pop, 
  .perfect-item,
  .error-shake,    /* æºã‚Œã¯æ­¢ã‚ã‚‹ãŒèµ¤ãå…‰ã‚‹æ™‚é–“ã¯æ®‹ã™ */
  .light-shake,
  #new-record-badge {
    /* ã‚‚ã¨ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¤‰æ•°ã‚’ä¸Šæ›¸ãï¼ */
    animation-name: reduced-fade-in-out !important;
    animation-duration: 0.5s !important; /* 0.5ç§’ã ã‘è¡¨ç¤º */
    transform: none !important; /* ç§»å‹•ãƒ»æ‹¡å¤§ç¸®å°ã¯ç¦æ­¢ */
  }

  /* ã‚³ãƒ³ãƒœæ¼”å‡ºã‚‚æ‹¡å¤§ç¸®å°ã‚’æ­¢ã‚ã‚‹ */
  .combo-pop-anim {
    animation: none !important;
    transform: none !important;
  }

  /* ãƒªã‚¶ãƒ«ãƒˆã®ãƒ©ãƒ³ã‚¯æ¼”å‡ºï¼ˆæ´¾æ‰‹ãªã‚„ã¤ï¼‰ã‚‚ç°¡æ˜“è¡¨ç¤ºã« */
  #res-rank,
  .res-rank-s,
  .res-rank-a {
    animation: reduced-fade-in !important;
    animation-duration: 0.5s !important;
    text-shadow: 2px 2px 0 var(--color-gray) !important; /* ã‚®ãƒ©ã‚®ãƒ©å½±ã‚‚æŠ‘ãˆã‚‹ */
    filter: none !important;
    transform: none !important;
  }
}

/* --------------------------------------
   å°‚ç”¨ã®ã€Œå„ªã—ã„ã€ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ 
   -------------------------------------- */
/* ãµã‚ã£ã¨å‡ºã¦æ¶ˆãˆã‚‹ã ã‘ï¼ˆç§»å‹•ãªã—ï¼‰ */
@keyframes reduced-fade-in-out {
  0% {
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* ãµã‚ã£ã¨å‡ºã‚‹ã ã‘ */
@keyframes reduced-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
